import{_ as s,c as n,a as e,o as t}from"./app-BeGBmzfF.js";const p={};function i(l,a){return t(),n("div",null,[...a[0]||(a[0]=[e(`<h1 id="server-api" tabindex="-1"><a class="header-anchor" href="#server-api"><span>Server API</span></a></h1><h2 id="interface-overview" tabindex="-1"><a class="header-anchor" href="#interface-overview"><span>Interface Overview</span></a></h2><p>The Server API provides comprehensive functionality for interacting with the Dify platform, including managing applications, retrieving and initializing API keys for both applications and datasets. All interfaces require a valid API key for authentication. Use the <code>DifyServer</code> interface instance.</p><blockquote><p>By default, if the current environment contains redis, then use redis to persist the token, if not, then use the default implementation to save the token (it will be lost if the service is restarted).</p></blockquote><h2 id="_1-application-management" tabindex="-1"><a class="header-anchor" href="#_1-application-management"><span>1. Application Management</span></a></h2><h3 id="_1-1-get-all-applications" tabindex="-1"><a class="header-anchor" href="#_1-1-get-all-applications"><span>1.1 Get All Applications</span></a></h3><h4 id="method" tabindex="-1"><a class="header-anchor" href="#method"><span>Method</span></a></h4><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">AppsResponseVO</span><span class="token punctuation">&gt;</span></span> <span class="token function">apps</span><span class="token punctuation">(</span><span class="token class-name">String</span> mode<span class="token punctuation">,</span> <span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="request-parameters" tabindex="-1"><a class="header-anchor" href="#request-parameters"><span>Request Parameters</span></a></h4><table><thead><tr><th>Parameter name</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td>mode</td><td>String</td><td>No</td><td>mode chat\\agent-chat\\completion\\advanced-chat\\workflow</td></tr><tr><td>name</td><td>String</td><td>No</td><td>Application name, used to filter the application list (optional)</td></tr></tbody></table><h4 id="response-parameters" tabindex="-1"><a class="header-anchor" href="#response-parameters"><span>Response Parameters</span></a></h4><p>AppsResponseVO</p><table><thead><tr><th>Parameter name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>id</td><td>String</td><td>Application ID</td></tr><tr><td>name</td><td>String</td><td>Application name</td></tr><tr><td>maxActiveRequests</td><td>Integer</td><td>Maximum active requests</td></tr><tr><td>description</td><td>String</td><td>Application description</td></tr><tr><td>mode</td><td>String</td><td>Application mode</td></tr><tr><td>iconType</td><td>String</td><td>Icon type</td></tr><tr><td>icon</td><td>String</td><td>Icon</td></tr><tr><td>iconBackground</td><td>String</td><td>Icon background</td></tr><tr><td>iconUrl</td><td>String</td><td>Icon URL</td></tr><tr><td>modelConfig</td><td>ModelConfig</td><td>Model configuration</td></tr><tr><td>workflow</td><td>Object</td><td>Workflow information</td></tr><tr><td>useIconAsAnswerIcon</td><td>Boolean</td><td>Whether to use icon as answer icon</td></tr><tr><td>createdBy</td><td>String</td><td>Creator ID</td></tr><tr><td>createdAt</td><td>Long</td><td>Creation time (timestamp)</td></tr><tr><td>updatedBy</td><td>String</td><td>Updater ID</td></tr><tr><td>updatedAt</td><td>Long</td><td>Update time (timestamp)</td></tr><tr><td>tags</td><td><code>List&lt;String&gt;</code></td><td>Application tags</td></tr></tbody></table><p>ModelConfig</p><table><thead><tr><th>Parameter name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>model</td><td>Model</td><td>Model information</td></tr><tr><td>prePrompt</td><td>String</td><td>Pre-prompt text</td></tr><tr><td>createdBy</td><td>String</td><td>Creator ID</td></tr><tr><td>createdAt</td><td>Long</td><td>Creation time (timestamp)</td></tr><tr><td>updatedBy</td><td>String</td><td>Updater ID</td></tr><tr><td>updatedAt</td><td>Long</td><td>Update time (timestamp)</td></tr></tbody></table><p>Model</p><table><thead><tr><th>Parameter name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>provider</td><td>String</td><td>Model provider</td></tr><tr><td>name</td><td>String</td><td>Model name</td></tr><tr><td>mode</td><td>String</td><td>Model mode</td></tr><tr><td>completionParams</td><td>CompletionParams</td><td>Completion parameters</td></tr></tbody></table><p>CompletionParams</p><table><thead><tr><th>Parameter name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>stop</td><td><code>List&lt;String&gt;</code></td><td>Stop sequences</td></tr></tbody></table><h4 id="request-example" tabindex="-1"><a class="header-anchor" href="#request-example"><span>Request Example</span></a></h4><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"></span>
<span class="line"><span class="token annotation punctuation">@Resource</span></span>
<span class="line"><span class="token keyword">private</span> <span class="token class-name">DifyServer</span> difyServer<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token annotation punctuation">@Test</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testGetApps</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// Get all applications</span></span>
<span class="line">    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">AppsResponseVO</span><span class="token punctuation">&gt;</span></span> apps <span class="token operator">=</span> difyServer<span class="token punctuation">.</span><span class="token function">apps</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// Get applications with name filter</span></span>
<span class="line">    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">AppsResponseVO</span><span class="token punctuation">&gt;</span></span> filteredApps <span class="token operator">=</span> difyServer<span class="token punctuation">.</span><span class="token function">apps</span><span class="token punctuation">(</span><span class="token string">&quot;myApp&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_1-2-get-application-by-id" tabindex="-1"><a class="header-anchor" href="#_1-2-get-application-by-id"><span>1.2 Get Application by ID</span></a></h3><h4 id="method-1" tabindex="-1"><a class="header-anchor" href="#method-1"><span>Method</span></a></h4><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token class-name">AppsResponseVO</span> <span class="token function">app</span><span class="token punctuation">(</span><span class="token class-name">String</span> appId<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="request-parameters-1" tabindex="-1"><a class="header-anchor" href="#request-parameters-1"><span>Request Parameters</span></a></h4><table><thead><tr><th>Parameter name</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td>appId</td><td>String</td><td>Yes</td><td>Application ID</td></tr></tbody></table><h4 id="response-parameters-1" tabindex="-1"><a class="header-anchor" href="#response-parameters-1"><span>Response Parameters</span></a></h4><p>Same as the AppsResponseVO structure defined above.</p><h4 id="request-example-1" tabindex="-1"><a class="header-anchor" href="#request-example-1"><span>Request Example</span></a></h4><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"></span>
<span class="line"><span class="token annotation punctuation">@Resource</span></span>
<span class="line"><span class="token keyword">private</span> <span class="token class-name">DifyServer</span> difyServer<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token annotation punctuation">@Test</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testGetApp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token class-name">AppsResponseVO</span> app <span class="token operator">=</span> difyServer<span class="token punctuation">.</span><span class="token function">app</span><span class="token punctuation">(</span><span class="token string">&quot;app-123456789&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_1-3-get-application-api-keys" tabindex="-1"><a class="header-anchor" href="#_1-3-get-application-api-keys"><span>1.3 Get Application API Keys</span></a></h3><h4 id="method-2" tabindex="-1"><a class="header-anchor" href="#method-2"><span>Method</span></a></h4><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ApiKeyResponseVO</span><span class="token punctuation">&gt;</span></span> <span class="token function">getAppApiKey</span><span class="token punctuation">(</span><span class="token class-name">String</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="request-parameters-2" tabindex="-1"><a class="header-anchor" href="#request-parameters-2"><span>Request Parameters</span></a></h4><table><thead><tr><th>Parameter name</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td>id</td><td>String</td><td>Yes</td><td>Application ID</td></tr></tbody></table><h4 id="response-parameters-2" tabindex="-1"><a class="header-anchor" href="#response-parameters-2"><span>Response Parameters</span></a></h4><p>ApiKeyResponseVO</p><table><thead><tr><th>Parameter name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>id</td><td>String</td><td>API Key ID</td></tr><tr><td>token</td><td>String</td><td>API Key token value</td></tr></tbody></table><h4 id="request-example-2" tabindex="-1"><a class="header-anchor" href="#request-example-2"><span>Request Example</span></a></h4><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"></span>
<span class="line"><span class="token annotation punctuation">@Resource</span></span>
<span class="line"><span class="token keyword">private</span> <span class="token class-name">DifyServer</span> difyServer<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token annotation punctuation">@Test</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testGetAppApiKeys</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ApiKeyResponseVO</span><span class="token punctuation">&gt;</span></span> apiKeys <span class="token operator">=</span> difyServer<span class="token punctuation">.</span><span class="token function">getAppApiKey</span><span class="token punctuation">(</span><span class="token string">&quot;app-123456789&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_1-4-initialize-application-api-key" tabindex="-1"><a class="header-anchor" href="#_1-4-initialize-application-api-key"><span>1.4 Initialize Application API Key</span></a></h3><h4 id="method-3" tabindex="-1"><a class="header-anchor" href="#method-3"><span>Method</span></a></h4><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ApiKeyResponseVO</span><span class="token punctuation">&gt;</span></span> <span class="token function">initAppApiKey</span><span class="token punctuation">(</span><span class="token class-name">String</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="request-parameters-3" tabindex="-1"><a class="header-anchor" href="#request-parameters-3"><span>Request Parameters</span></a></h4><table><thead><tr><th>Parameter name</th><th>Type</th><th>Required</th><th>Description</th></tr></thead><tbody><tr><td>id</td><td>String</td><td>Yes</td><td>Application ID</td></tr></tbody></table><h4 id="response-parameters-3" tabindex="-1"><a class="header-anchor" href="#response-parameters-3"><span>Response Parameters</span></a></h4><p>Same as the ApiKeyResponseVO structure defined above.</p><h4 id="request-example-3" tabindex="-1"><a class="header-anchor" href="#request-example-3"><span>Request Example</span></a></h4><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"></span>
<span class="line"><span class="token annotation punctuation">@Resource</span></span>
<span class="line"><span class="token keyword">private</span> <span class="token class-name">DifyServer</span> difyServer<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token annotation punctuation">@Test</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testInitAppApiKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ApiKeyResponseVO</span><span class="token punctuation">&gt;</span></span> apiKeys <span class="token operator">=</span> difyServer<span class="token punctuation">.</span><span class="token function">initAppApiKey</span><span class="token punctuation">(</span><span class="token string">&quot;app-123456789&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_2-knowledge-base-management" tabindex="-1"><a class="header-anchor" href="#_2-knowledge-base-management"><span>2. Knowledge Base Management</span></a></h2><h3 id="_2-1-get-knowledge-base-api-keys" tabindex="-1"><a class="header-anchor" href="#_2-1-get-knowledge-base-api-keys"><span>2.1 Get Knowledge Base API Keys</span></a></h3><h4 id="method-4" tabindex="-1"><a class="header-anchor" href="#method-4"><span>Method</span></a></h4><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">DatasetApiKeyResponseVO</span><span class="token punctuation">&gt;</span></span> <span class="token function">getDatasetApiKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="response-parameters-4" tabindex="-1"><a class="header-anchor" href="#response-parameters-4"><span>Response Parameters</span></a></h4><p>DatasetApiKeyResponseVO</p><table><thead><tr><th>Parameter name</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>id</td><td>String</td><td>API Key ID</td></tr><tr><td>type</td><td>String</td><td>API Key type</td></tr><tr><td>token</td><td>String</td><td>API Key token value</td></tr><tr><td>lastUsedAt</td><td>Long</td><td>Last used time (timestamp)</td></tr><tr><td>createdAt</td><td>Long</td><td>Creation time (timestamp)</td></tr></tbody></table><h4 id="request-example-4" tabindex="-1"><a class="header-anchor" href="#request-example-4"><span>Request Example</span></a></h4><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"></span>
<span class="line"><span class="token annotation punctuation">@Resource</span></span>
<span class="line"><span class="token keyword">private</span> <span class="token class-name">DifyServer</span> difyServer<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token annotation punctuation">@Test</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testGetDatasetApiKeys</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">DatasetApiKeyResponseVO</span><span class="token punctuation">&gt;</span></span> datasetApiKeys <span class="token operator">=</span> difyServer<span class="token punctuation">.</span><span class="token function">getDatasetApiKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-2-initialize-knowledge-base-api-key" tabindex="-1"><a class="header-anchor" href="#_2-2-initialize-knowledge-base-api-key"><span>2.2 Initialize Knowledge Base API Key</span></a></h3><h4 id="method-5" tabindex="-1"><a class="header-anchor" href="#method-5"><span>Method</span></a></h4><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">DatasetApiKeyResponseVO</span><span class="token punctuation">&gt;</span></span> <span class="token function">initDatasetApiKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="response-parameters-5" tabindex="-1"><a class="header-anchor" href="#response-parameters-5"><span>Response Parameters</span></a></h4><p>Same as the DatasetApiKeyResponseVO structure defined above.</p><h4 id="request-example-5" tabindex="-1"><a class="header-anchor" href="#request-example-5"><span>Request Example</span></a></h4><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"></span>
<span class="line"><span class="token annotation punctuation">@Resource</span></span>
<span class="line"><span class="token keyword">private</span> <span class="token class-name">DifyServer</span> difyServer<span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token annotation punctuation">@Test</span></span>
<span class="line"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testInitDatasetApiKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">DatasetApiKeyResponseVO</span><span class="token punctuation">&gt;</span></span> datasetApiKeys <span class="token operator">=</span> difyServer<span class="token punctuation">.</span><span class="token function">initDatasetApiKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,65)])])}const c=s(p,[["render",i],["__file","server.html.vue"]]),o=JSON.parse('{"path":"/en/guide/feature/server.html","title":"Server API","lang":"en-US","frontmatter":{"lang":"en-US","title":"Server API","description":null},"git":{"updatedTime":1744600946000,"contributors":[{"name":"yanghq","username":"yanghq","email":"1040926235@qq.com","commits":3,"url":"https://github.com/yanghq"}],"changelog":[{"hash":"85c6996416acc69d6c46700179cf4322701f540c","time":1744600946000,"email":"1040926235@qq.com","author":"yanghq","message":"fix: update test"},{"hash":"c6c2edb1fab4b549428e9df63508baf42bf775d8","time":1744263215000,"email":"1040926235@qq.com","author":"yanghq","message":"doc: update custom config"},{"hash":"4286f90a3482a47347effe3b8f407afce8dfb2a5","time":1743576822000,"email":"1040926235@qq.com","author":"yanghq","message":"doc: server api"}]},"filePathRelative":"en/guide/feature/server.md"}');export{c as comp,o as data};
