import{_ as s,c as a,a as e,o as t}from"./app-aL_4n8_u.js";const p={};function i(l,n){return t(),a("div",null,[...n[0]||(n[0]=[e(`<h1 id="client-builder" tabindex="-1"><a class="header-anchor" href="#client-builder"><span>Client Builder</span></a></h1><p>The Dify Java client library uses the builder pattern to make it easy to create and configure the various clients needed to interact with the Dify API. If you are using a non-SpringBoot project or don&#39;t want to use the default constructor instance, you can use the methods below for custom construction.</p><h2 id="overview" tabindex="-1"><a class="header-anchor" href="#overview"><span>Overview</span></a></h2><p>The Dify client library includes several builders for different API endpoints:</p><ul><li><code>DifyChatBuilder</code> - For chat-related operations</li><li><code>DifyDatasetBuilder</code> - For dataset operations</li><li><code>DifyWorkflowBuilder</code> - For workflow operations</li><li><code>DifyServerBuilder</code> - For server administration operations</li></ul><h2 id="using-the-builders" tabindex="-1"><a class="header-anchor" href="#using-the-builders"><span>Using the Builders</span></a></h2><h3 id="basic-usage" tabindex="-1"><a class="header-anchor" href="#basic-usage"><span>Basic Usage</span></a></h3><p>The quickest way to create a client is using the static factory methods:</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token comment">// Create a chat client with default settings</span></span>
<span class="line"><span class="token class-name">DifyChat</span> difyChat <span class="token operator">=</span> <span class="token class-name">DifyChatBuilder</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span></span>
<span class="line">        <span class="token class-name">DifyChatBuilder<span class="token punctuation">.</span>DifyChatClientBuilder</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Create a chat client with a custom base URL</span></span>
<span class="line"><span class="token class-name">DifyChat</span> difyChat <span class="token operator">=</span> <span class="token class-name">DifyChatBuilder</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span></span>
<span class="line">        <span class="token class-name">DifyChatBuilder<span class="token punctuation">.</span>DifyChatClientBuilder</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token string">&quot;https://your-dify-api.example.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="using-the-fluent-builder-api" tabindex="-1"><a class="header-anchor" href="#using-the-fluent-builder-api"><span>Using the Fluent Builder API</span></a></h3><p>For more control, you can use the fluent builder API:</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token class-name">DifyChat</span> difyChat <span class="token operator">=</span> <span class="token class-name">DifyChatBuilder</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span></span>
<span class="line">        <span class="token class-name">DifyChatBuilder<span class="token punctuation">.</span>DifyChatClientBuilder</span></span>
<span class="line">                <span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">                <span class="token punctuation">.</span><span class="token function">baseUrl</span><span class="token punctuation">(</span><span class="token string">&quot;https://your-dify-api.example.com&quot;</span><span class="token punctuation">)</span></span>
<span class="line">                <span class="token punctuation">.</span><span class="token function">clientConfig</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">DifyProperties<span class="token punctuation">.</span>ClientConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="server-client-with-authentication" tabindex="-1"><a class="header-anchor" href="#server-client-with-authentication"><span>Server Client with Authentication</span></a></h3><p>The server client requires authentication credentials:</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"></span>
<span class="line"><span class="token class-name">DifyDataset</span> difyDataset <span class="token operator">=</span> <span class="token class-name">DifyDatasetBuilder</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span></span>
<span class="line">        <span class="token class-name">DifyDatasetBuilder<span class="token punctuation">.</span>DifyDatasetClientBuilder</span></span>
<span class="line">                <span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">                <span class="token punctuation">.</span><span class="token function">baseUrl</span><span class="token punctuation">(</span><span class="token string">&quot;https://custom-dify-api.example.com&quot;</span><span class="token punctuation">)</span></span>
<span class="line">                <span class="token punctuation">.</span><span class="token function">apiKey</span><span class="token punctuation">(</span>&#39;ak<span class="token operator">-</span>aaaa&#39;<span class="token punctuation">)</span></span>
<span class="line">                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The server client requires authentication credentials:</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token class-name">DifyProperties<span class="token punctuation">.</span>Server</span> serverProps <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DifyProperties<span class="token punctuation">.</span>Server</span><span class="token punctuation">(</span><span class="token string">&quot;admin@example.com&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;password&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token class-name">DifyServer</span> difyServer <span class="token operator">=</span> <span class="token class-name">DifyServerBuilder</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span></span>
<span class="line">        <span class="token class-name">DifyServerBuilder<span class="token punctuation">.</span>DifyServerClientBuilder</span></span>
<span class="line">                <span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">                <span class="token punctuation">.</span><span class="token function">serverProperties</span><span class="token punctuation">(</span>serverProps<span class="token punctuation">)</span></span>
<span class="line">                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="common-configuration-options" tabindex="-1"><a class="header-anchor" href="#common-configuration-options"><span>Common Configuration Options</span></a></h2><p>All builders support these common configuration options:</p><ul><li><code>baseUrl(String)</code> - Set the base URL for the Dify API</li><li><code>clientConfig(DifyProperties.ClientConfig)</code> - Configure client behavior like timeout, retry policy, etc.</li><li><code>restClientBuilder(RestClient.Builder)</code> - Provide a custom Spring RestClient builder</li><li><code>webClientBuilder(WebClient.Builder)</code> - Provide a custom Spring WebClient builder</li></ul><h2 id="advanced-usage" tabindex="-1"><a class="header-anchor" href="#advanced-usage"><span>Advanced Usage</span></a></h2><h3 id="customizing-http-clients" tabindex="-1"><a class="header-anchor" href="#customizing-http-clients"><span>Customizing HTTP Clients</span></a></h3><p>You can customize the HTTP clients used by the Dify clients:</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token comment">// Configure a custom RestClient with special settings</span></span>
<span class="line"><span class="token class-name">RestClient<span class="token punctuation">.</span>Builder</span> customRestClientBuilder <span class="token operator">=</span> <span class="token class-name">RestClient</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">requestFactory</span><span class="token punctuation">(</span><span class="token comment">/* ... */</span><span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">.</span><span class="token function">defaultHeaders</span><span class="token punctuation">(</span>headers <span class="token operator">-&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">            headers<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&quot;Custom-Header&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Value&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token class-name">DifyDataset</span> difyDataset <span class="token operator">=</span> <span class="token class-name">DifyDatasetBuilder</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span></span>
<span class="line">        <span class="token class-name">DifyDatasetBuilder<span class="token punctuation">.</span>DifyDatasetClientBuilder</span></span>
<span class="line">                <span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">                <span class="token punctuation">.</span><span class="token function">restClientBuilder</span><span class="token punctuation">(</span>customRestClientBuilder<span class="token punctuation">)</span></span>
<span class="line">                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="setting-client-configuration" tabindex="-1"><a class="header-anchor" href="#setting-client-configuration"><span>Setting Client Configuration</span></a></h3><p>You can configure how the client behaves:</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token comment">// Configure client behavior</span></span>
<span class="line"><span class="token class-name">DifyProperties<span class="token punctuation">.</span>ClientConfig</span> clientConfig <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DifyProperties<span class="token punctuation">.</span>ClientConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">clientConfig<span class="token punctuation">.</span><span class="token function">setSkipNull</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token class-name">DifyWorkflow</span> difyWorkflow <span class="token operator">=</span> <span class="token class-name">DifyWorkflowBuilder</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span></span>
<span class="line">        <span class="token class-name">DifyWorkflowBuilder<span class="token punctuation">.</span>DifyWorkflowClientBuilder</span></span>
<span class="line">                <span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">                <span class="token punctuation">.</span><span class="token function">clientConfig</span><span class="token punctuation">(</span>clientConfig<span class="token punctuation">)</span></span>
<span class="line">                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="example-complete-configuration" tabindex="-1"><a class="header-anchor" href="#example-complete-configuration"><span>Example: Complete Configuration</span></a></h2><p>Here&#39;s an example with full configuration:</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token class-name">DifyServer</span> difyServer <span class="token operator">=</span> <span class="token class-name">DifyServerBuilder</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span></span>
<span class="line">        <span class="token class-name">DifyServerBuilder<span class="token punctuation">.</span>DifyServerClientBuilder</span></span>
<span class="line">                <span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">                <span class="token punctuation">.</span><span class="token function">baseUrl</span><span class="token punctuation">(</span><span class="token string">&quot;https://your-dify-api.example.com&quot;</span><span class="token punctuation">)</span></span>
<span class="line">                <span class="token punctuation">.</span><span class="token function">serverProperties</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">DifyProperties<span class="token punctuation">.</span>Server</span><span class="token punctuation">(</span><span class="token string">&quot;admin@example.com&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;password&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">                <span class="token punctuation">.</span><span class="token function">serverToken</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">DifyServerTokenDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">                <span class="token punctuation">.</span><span class="token function">clientConfig</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">DifyProperties<span class="token punctuation">.</span>ClientConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">                <span class="token punctuation">.</span><span class="token function">restClientBuilder</span><span class="token punctuation">(</span><span class="token class-name">RestClient</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">                <span class="token punctuation">.</span><span class="token function">webClientBuilder</span><span class="token punctuation">(</span><span class="token class-name">WebClient</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="notes" tabindex="-1"><a class="header-anchor" href="#notes"><span>Notes</span></a></h2><ul><li>The overall usage has no difference, but in the SpringBoot 2 environment, there is no RestClient, only WebClient.</li></ul>`,32)])])}const o=s(p,[["render",i]]),u=JSON.parse('{"path":"/en/guide/builder.html","title":"Client Builder","lang":"en-US","frontmatter":{"lang":"en-US","title":"Client Builder","description":"Client Builder"},"git":{"updatedTime":1755084380000,"contributors":[{"name":"yanghq","username":"yanghq","email":"1040926235@qq.com","commits":2,"url":"https://github.com/yanghq"}],"changelog":[{"hash":"102cdf2c6e1a99b92330b4e253e16c2fae472430","time":1755084380000,"email":"1040926235@qq.com","author":"yanghq","message":"doc: DifyDatasetBuilder expand apikey"},{"hash":"c92291bec9a79fb6308b7423ac6fc0f725bc774b","time":1744946377000,"email":"1040926235@qq.com","author":"yanghq","message":"doc: support builder"}]},"filePathRelative":"en/guide/builder.md"}');export{o as comp,u as data};
