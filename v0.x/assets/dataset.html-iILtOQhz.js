import{_ as d,c as a,a as e,o as n}from"./app-CFSRsA5l.js";const s={};function r(i,t){return n(),a("div",null,t[0]||(t[0]=[e(`<h1 id="dataset-api" tabindex="-1"><a class="header-anchor" href="#dataset-api"><span>Dataset API</span></a></h1><h2 id="接口概述" tabindex="-1"><a class="header-anchor" href="#接口概述"><span>接口概述</span></a></h2><p>知识库服务接口提供完整的知识库管理功能集成能力，包含知识库创建、文档管理、分段管理、数据检索等核心功能。所有接口均需要有效的API密钥进行身份验证。 使用<code>DifyDataset</code>接口实例。</p><blockquote><p>以下所有接口都包含apikey，apikey 字段为选填，为空时默认使用配置文件中的 apikey</p></blockquote><h2 id="_1-知识库管理" tabindex="-1"><a class="header-anchor" href="#_1-知识库管理"><span>1. 知识库管理</span></a></h2><h3 id="_1-1-创建知识库" tabindex="-1"><a class="header-anchor" href="#_1-1-创建知识库"><span>1.1 创建知识库</span></a></h3><h4 id="方法" tabindex="-1"><a class="header-anchor" href="#方法"><span>方法</span></a></h4><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code><span class="line"><span class="token class-name">DatasetResponse</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">DatasetCreateRequest</span> request<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="请求参数" tabindex="-1"><a class="header-anchor" href="#请求参数"><span>请求参数</span></a></h4><p>DatasetCreateRequest</p><table><thead><tr><th>参数名</th><th>类型</th><th>是否必须</th><th>描述</th></tr></thead><tbody><tr><td>name</td><td>String</td><td>是</td><td>知识库名称</td></tr><tr><td>description</td><td>String</td><td>否</td><td>知识库描述</td></tr><tr><td>permission</td><td>PermissionEnum</td><td>否</td><td>权限设置</td></tr><tr><td>provider</td><td>ProviderEnum</td><td>否</td><td>所属</td></tr><tr><td>indexingTechnique</td><td>IndexingTechniqueEnum</td><td>否</td><td>索引技术</td></tr></tbody></table><p><strong>ProviderEnum 枚举值</strong></p><table><thead><tr><th>枚举值</th><th>描述</th></tr></thead><tbody><tr><td>SELF_BUILT</td><td>自建</td></tr><tr><td>THIRD_PARTY</td><td>第三方</td></tr></tbody></table><p><strong>PermissionEnum 枚举值</strong></p><table><thead><tr><th>枚举值</th><th>描述</th></tr></thead><tbody><tr><td>ONLY_ME</td><td>仅自己可见</td></tr><tr><td>TEAM</td><td>团队可见</td></tr><tr><td>PUBLIC</td><td>公开可见</td></tr></tbody></table><p><strong>IndexingTechniqueEnum 枚举值</strong></p><table><thead><tr><th>枚举值</th><th>描述</th></tr></thead><tbody><tr><td>HIGH_QUALITY</td><td>高质量</td></tr><tr><td>ECONOMY</td><td>经济型</td></tr></tbody></table><h4 id="响应参数" tabindex="-1"><a class="header-anchor" href="#响应参数"><span>响应参数</span></a></h4><p>DatasetResponse</p><table><thead><tr><th>参数名</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>id</td><td>String</td><td>知识库 id</td></tr><tr><td>name</td><td>String</td><td>知识库名称</td></tr><tr><td>description</td><td>String</td><td>知识库描述</td></tr><tr><td>permission</td><td>PermissionEnum</td><td>权限</td></tr><tr><td>dataSourceType</td><td>String</td><td>数据源类型</td></tr><tr><td>indexingTechnique</td><td>IndexingTechniqueEnum</td><td>索引技术</td></tr><tr><td>appCount</td><td>Integer</td><td>应用数量</td></tr><tr><td>documentCount</td><td>Integer</td><td>文档数量</td></tr><tr><td>wordCount</td><td>Integer</td><td>单词数量</td></tr><tr><td>createdBy</td><td>String</td><td>创建人</td></tr><tr><td>createdAt</td><td>Long</td><td>创建时间戳</td></tr><tr><td>updatedBy</td><td>String</td><td>更新人</td></tr><tr><td>updatedAt</td><td>Long</td><td>更新时间戳</td></tr></tbody></table><h3 id="_1-2-分页查询知识库列表" tabindex="-1"><a class="header-anchor" href="#_1-2-分页查询知识库列表"><span>1.2 分页查询知识库列表</span></a></h3><h4 id="方法-1" tabindex="-1"><a class="header-anchor" href="#方法-1"><span>方法</span></a></h4><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code><span class="line"><span class="token class-name">DifyPageResult</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">DatasetResponse</span><span class="token punctuation">&gt;</span></span> <span class="token function">page</span><span class="token punctuation">(</span><span class="token class-name">DatasetPageRequest</span> request<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="请求参数-1" tabindex="-1"><a class="header-anchor" href="#请求参数-1"><span>请求参数</span></a></h4><p>DatasetPageRequest</p><table><thead><tr><th>参数名</th><th>类型</th><th>是否必须</th><th>描述</th></tr></thead><tbody><tr><td>page</td><td>Integer</td><td>否</td><td>页码，默认1</td></tr><tr><td>limit</td><td>Integer</td><td>否</td><td>每页记录数，默认20条</td></tr></tbody></table><h4 id="响应参数-1" tabindex="-1"><a class="header-anchor" href="#响应参数-1"><span>响应参数</span></a></h4><p><code>DifyPageResult&lt;DatasetResponse&gt;</code></p><table><thead><tr><th>参数名</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>list</td><td><code>List&lt;DatasetResponse&gt;</code></td><td>知识库列表</td></tr><tr><td>total</td><td>Long</td><td>总记录数</td></tr><tr><td>page</td><td>Integer</td><td>当前页码</td></tr><tr><td>limit</td><td>Integer</td><td>每页记录数</td></tr><tr><td>pages</td><td>Integer</td><td>总页数</td></tr></tbody></table><p>DatasetResponse 查看 1.1</p><h3 id="_1-3-知识库详情" tabindex="-1"><a class="header-anchor" href="#_1-3-知识库详情"><span>1.3 知识库详情</span></a></h3><h4 id="方法-2" tabindex="-1"><a class="header-anchor" href="#方法-2"><span>方法</span></a></h4><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code><span class="line"><span class="token class-name">DatasetInfoResponse</span> <span class="token function">info</span><span class="token punctuation">(</span><span class="token class-name">DatasetInfoRequest</span> request<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="请求参数-2" tabindex="-1"><a class="header-anchor" href="#请求参数-2"><span>请求参数</span></a></h4><p>DatasetInfoRequest</p><table><thead><tr><th>参数名</th><th>类型</th><th>是否必须</th><th>描述</th></tr></thead><tbody><tr><td>datasetId</td><td>String</td><td>是</td><td>知识库 id</td></tr></tbody></table><h4 id="响应参数-2" tabindex="-1"><a class="header-anchor" href="#响应参数-2"><span>响应参数</span></a></h4><p>DatasetInfoResponse</p><table><thead><tr><th>参数名</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>id</td><td>String</td><td>知识库 id</td></tr><tr><td>name</td><td>String</td><td>知识库名称</td></tr><tr><td>description</td><td>String</td><td>知识库描述</td></tr><tr><td>permission</td><td>PermissionEnum</td><td>权限</td></tr><tr><td>dataSourceType</td><td>String</td><td>数据源类型</td></tr><tr><td>indexingTechnique</td><td>IndexingTechniqueEnum</td><td>索引技术</td></tr><tr><td>appCount</td><td>Integer</td><td>应用数量</td></tr><tr><td>documentCount</td><td>Integer</td><td>文档数量</td></tr><tr><td>wordCount</td><td>Integer</td><td>单词数量</td></tr><tr><td>createdBy</td><td>String</td><td>创建人</td></tr><tr><td>createdAt</td><td>Long</td><td>创建时间戳</td></tr><tr><td>updatedBy</td><td>String</td><td>更新人</td></tr><tr><td>updatedAt</td><td>Long</td><td>更新时间戳</td></tr><tr><td>embeddingModel</td><td>String</td><td>嵌入模型</td></tr><tr><td>embeddingModelProvider</td><td>String</td><td>嵌入模型提供商</td></tr><tr><td>embeddingAvailable</td><td>Boolean</td><td>嵌入模型是否可用</td></tr><tr><td>retrievalModelDict</td><td>RetrievalModel</td><td>检索模型字典</td></tr><tr><td>tags</td><td><code>List&lt;String&gt;</code></td><td>标签列表</td></tr><tr><td>docForm</td><td>DocFormEnum</td><td>文档形式</td></tr><tr><td>externalKnowledgeInfo</td><td>ExternalKnowledgeInfo</td><td>外部知识信息</td></tr></tbody></table><h3 id="_1-4-修改知识库" tabindex="-1"><a class="header-anchor" href="#_1-4-修改知识库"><span>1.4 修改知识库</span></a></h3><h4 id="方法-3" tabindex="-1"><a class="header-anchor" href="#方法-3"><span>方法</span></a></h4><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code><span class="line"><span class="token class-name">DatasetInfoResponse</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">DatasetUpdateRequest</span> request<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="请求参数-3" tabindex="-1"><a class="header-anchor" href="#请求参数-3"><span>请求参数</span></a></h4><p>DatasetUpdateRequest</p><table><thead><tr><th>参数名</th><th>类型</th><th>是否必须</th><th>描述</th></tr></thead><tbody><tr><td>datasetId</td><td>String</td><td>是</td><td>知识库 id</td></tr><tr><td>indexingTechnique</td><td>IndexingTechniqueEnum</td><td>否</td><td>索引模式</td></tr><tr><td>permission</td><td>PermissionEnum</td><td>否</td><td>权限</td></tr><tr><td>retrievalModel</td><td>RetrievalModel</td><td>否</td><td>检索模型</td></tr><tr><td>embeddingModel</td><td>String</td><td>否</td><td>嵌入模型</td></tr><tr><td>embeddingModelProvider</td><td>String</td><td>否</td><td>嵌入模型提供商</td></tr><tr><td>partialMemberList</td><td><code>List&lt;String&gt;</code></td><td>否</td><td>部分成员列表</td></tr></tbody></table><h4 id="响应参数-3" tabindex="-1"><a class="header-anchor" href="#响应参数-3"><span>响应参数</span></a></h4><p>DatasetInfoResponse 查看 1.3</p><h3 id="_1-5-删除知识库" tabindex="-1"><a class="header-anchor" href="#_1-5-删除知识库"><span>1.5 删除知识库</span></a></h3><h4 id="方法-4" tabindex="-1"><a class="header-anchor" href="#方法-4"><span>方法</span></a></h4><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code><span class="line"><span class="token keyword">void</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token class-name">String</span> datasetId<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">void</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token class-name">String</span> datasetId<span class="token punctuation">,</span> <span class="token class-name">String</span> apiKey<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="请求参数-4" tabindex="-1"><a class="header-anchor" href="#请求参数-4"><span>请求参数</span></a></h4><table><thead><tr><th>参数名</th><th>类型</th><th>是否必须</th><th>描述</th></tr></thead><tbody><tr><td>datasetId</td><td>String</td><td>是</td><td>知识库 id</td></tr></tbody></table><h4 id="响应参数-4" tabindex="-1"><a class="header-anchor" href="#响应参数-4"><span>响应参数</span></a></h4><p>无</p><h2 id="_2-文档管理" tabindex="-1"><a class="header-anchor" href="#_2-文档管理"><span>2. 文档管理</span></a></h2><h3 id="_2-1-通过文本创建文档" tabindex="-1"><a class="header-anchor" href="#_2-1-通过文本创建文档"><span>2.1 通过文本创建文档</span></a></h3><h4 id="方法-5" tabindex="-1"><a class="header-anchor" href="#方法-5"><span>方法</span></a></h4><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code><span class="line"><span class="token class-name">DocumentCreateResponse</span> <span class="token function">createDocumentByText</span><span class="token punctuation">(</span><span class="token class-name">DocumentCreateByTextRequest</span> request<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="请求参数-5" tabindex="-1"><a class="header-anchor" href="#请求参数-5"><span>请求参数</span></a></h4><p>DocumentCreateByTextRequest</p><table><thead><tr><th>参数名</th><th>类型</th><th>是否必须</th><th>描述</th></tr></thead><tbody><tr><td>datasetId</td><td>String</td><td>是</td><td>知识库 id</td></tr><tr><td>name</td><td>String</td><td>是</td><td>文档名称</td></tr><tr><td>text</td><td>String</td><td>是</td><td>文档内容</td></tr><tr><td>docType</td><td>DocTypeEnum</td><td>否</td><td>文档类型</td></tr><tr><td>docMetadata</td><td><code>Map&lt;String, Object&gt;</code></td><td>否</td><td>文档元数据（如提供文档类型则必填）</td></tr><tr><td>indexingTechnique</td><td>IndexingTechniqueEnum</td><td>否</td><td>索引模式</td></tr><tr><td>docForm</td><td>DocFormEnum</td><td>否</td><td>文档形式</td></tr><tr><td>docLanguage</td><td>String</td><td>否</td><td>文档语言</td></tr><tr><td>processRule</td><td>ProcessRule</td><td>否</td><td>处理规则</td></tr><tr><td>retrievalModel</td><td>RetrievalModel</td><td>否</td><td>检索模型</td></tr><tr><td>embeddingModel</td><td>String</td><td>否</td><td>嵌入模型</td></tr><tr><td>embeddingModelProvider</td><td>String</td><td>否</td><td>嵌入模型提供商</td></tr></tbody></table><p><strong>DocTypeEnum 枚举值</strong></p><table><thead><tr><th>枚举值</th><th>描述</th></tr></thead><tbody><tr><td>book</td><td>图书</td></tr><tr><td>web_page</td><td>网页</td></tr><tr><td>paper</td><td>学术论文/文章</td></tr><tr><td>social_media_post</td><td>社交媒体帖子</td></tr><tr><td>wikipedia_entry</td><td>维基百科条目</td></tr><tr><td>personal_document</td><td>个人文档</td></tr><tr><td>business_document</td><td>商业文档</td></tr><tr><td>im_chat_log</td><td>即时通讯记录</td></tr><tr><td>synced_from_notion</td><td>Notion同步文档</td></tr><tr><td>synced_from_github</td><td>GitHub同步文档</td></tr><tr><td>others</td><td>其他文档类型</td></tr></tbody></table><p><strong>DocFormEnum 枚举值</strong></p><table><thead><tr><th>枚举值</th><th>描述</th></tr></thead><tbody><tr><td>text_model</td><td>文档直接embedding，经济模式默认为该模式</td></tr><tr><td>hierarchical_model</td><td>parent-child模式</td></tr><tr><td>qa_model</td><td>Q&amp;A模式：为分片文档生成Q&amp;A对，然后对问题进行embedding</td></tr></tbody></table><p><strong>ProcessRule 对象结构</strong></p><table><thead><tr><th>字段名</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>mode</td><td>ModeEnum</td><td>处理模式</td></tr><tr><td>rules</td><td>CustomRule</td><td>自定义规则</td></tr></tbody></table><p><strong>ModeEnum 对象结构</strong></p><table><thead><tr><th>枚举值</th><th>描述</th></tr></thead><tbody><tr><td>automatic</td><td>自动</td></tr><tr><td>hierarchical</td><td>parent-child模式</td></tr><tr><td>custom</td><td>自定义</td></tr></tbody></table><p><strong>CustomRule 对象结构</strong></p><table><thead><tr><th>字段名</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>preProcessingRules</td><td><code>List&lt;PreProcessingRule&gt;</code></td><td>预处理规则列表</td></tr><tr><td>segmentation</td><td>Segmentation</td><td>分段规则</td></tr><tr><td>parentMode</td><td>ParentModeEnum</td><td>父分段的召回模式</td></tr><tr><td>subChunkSegmentation</td><td>SubChunkSegmentation</td><td>子分段规则</td></tr></tbody></table><p><strong>PreProcessingRule 对象结构</strong></p><table><thead><tr><th>字段名</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>id</td><td>PreProcessingRuleTypeEnum</td><td>预处理规则的唯一标识符，如 remove_extra_spaces, remove_urls_emails</td></tr><tr><td>enabled</td><td>Boolean</td><td>是否选中该规则，不传入文档 ID 时代表默认值</td></tr></tbody></table><p><strong>Segmentation 对象结构</strong></p><table><thead><tr><th>字段名</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>separator</td><td>String</td><td>自定义分段标识符，目前仅允许设置一个分隔符。默认为 \\n</td></tr><tr><td>maxTokens</td><td>Integer</td><td>最大长度（token）默认为 1000</td></tr></tbody></table><p><strong>SubChunkSegmentation 对象结构</strong></p><table><thead><tr><th>字段名</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>separator</td><td>String</td><td>自定义子分段标识符</td></tr><tr><td>maxTokens</td><td>Integer</td><td>子分段最大长度（token）</td></tr><tr><td>chunkOverlap</td><td>Integer</td><td>子分段重叠长度</td></tr></tbody></table><p><strong>ParentModeEnum 枚举值</strong></p><table><thead><tr><th>枚举值</th><th>描述</th></tr></thead><tbody><tr><td>FULL_DOC</td><td>全文召回</td></tr><tr><td>PARAGRAPH</td><td>段落召回</td></tr></tbody></table><p><strong>RetrievalModel 对象结构</strong></p><table><thead><tr><th>字段名</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>searchMethod</td><td>SearchMethodEnum</td><td>搜索方法</td></tr><tr><td>rerankingEnable</td><td>Boolean</td><td>是否启用重排序</td></tr><tr><td>rerankingModel</td><td>RerankingModel</td><td>重排序模型</td></tr><tr><td>weights</td><td>RerankingModelWeight</td><td>权重</td></tr><tr><td>topK</td><td>Integer</td><td>返回结果数量</td></tr><tr><td>scoreThresholdEnabled</td><td>Boolean</td><td>是否启用分数阈值</td></tr><tr><td>scoreThreshold</td><td>Float</td><td>分数阈值</td></tr></tbody></table><p><strong>RerankingModel 对象结构</strong></p><table><thead><tr><th>字段名</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>rerankingProviderName</td><td>String</td><td>重排序提供商名称</td></tr><tr><td>rerankingModelName</td><td>String</td><td>重排序模型名称</td></tr></tbody></table><p><strong>RerankingModelWeight 对象结构</strong></p><table><thead><tr><th>字段名</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>weightType</td><td>String</td><td>默认为 customized</td></tr><tr><td>vectorSetting</td><td>VectorSetting</td><td>语义权重</td></tr><tr><td>keywordSetting</td><td>KeywordSetting</td><td>关键词权重</td></tr></tbody></table><p><strong>VectorSetting 对象结构</strong></p><table><thead><tr><th>字段名</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>vectorWeight</td><td>Float</td><td>语义权重</td></tr><tr><td>embeddingModelName</td><td>String</td><td>嵌入模型</td></tr><tr><td>embeddingProviderName</td><td>String</td><td>嵌入模型提供商</td></tr></tbody></table><p><strong>RerankingModelWeight 对象结构</strong></p><table><thead><tr><th>字段名</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>keywordWeight</td><td>Float</td><td>关键词权重</td></tr></tbody></table><h4 id="响应参数-5" tabindex="-1"><a class="header-anchor" href="#响应参数-5"><span>响应参数</span></a></h4><p>DocumentCreateResponse</p><table><thead><tr><th>参数名</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>document</td><td>DocumentInfo</td><td>文档信息</td></tr><tr><td>batch</td><td>String</td><td>批次号</td></tr></tbody></table><p><strong>DocumentInfo 对象结构</strong></p><table><thead><tr><th>参数名</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>id</td><td>String</td><td>文档 id</td></tr><tr><td>position</td><td>Integer</td><td>位置</td></tr><tr><td>dataSourceType</td><td>String</td><td>数据源类型</td></tr><tr><td>dataSourceInfo</td><td><code>Map&lt;String, Object&gt;</code></td><td>数据源信息</td></tr><tr><td>datasetProcessRuleId</td><td>String</td><td>知识库处理规则ID</td></tr><tr><td>name</td><td>String</td><td>文档名称</td></tr><tr><td>createdFrom</td><td>String</td><td>创建来源</td></tr><tr><td>createdBy</td><td>String</td><td>创建人</td></tr><tr><td>createdAt</td><td>Long</td><td>创建时间戳</td></tr><tr><td>tokens</td><td>Integer</td><td>令牌数量</td></tr><tr><td>indexingStatus</td><td>String</td><td>索引状态</td></tr><tr><td>error</td><td>String</td><td>错误信息</td></tr><tr><td>enabled</td><td>String</td><td>是否启用</td></tr><tr><td>disabledAt</td><td>Long</td><td>禁用时间</td></tr><tr><td>disabledBy</td><td>String</td><td>禁用人</td></tr><tr><td>archived</td><td>String</td><td>是否归档</td></tr><tr><td>displayStatus</td><td>String</td><td>显示状态</td></tr><tr><td>wordCount</td><td>String</td><td>单词数量</td></tr><tr><td>hitCount</td><td>String</td><td>命中次数</td></tr><tr><td>docForm</td><td>String</td><td>文档形式</td></tr></tbody></table><h3 id="_2-2-通过文件创建文档" tabindex="-1"><a class="header-anchor" href="#_2-2-通过文件创建文档"><span>2.2 通过文件创建文档</span></a></h3><h4 id="方法-6" tabindex="-1"><a class="header-anchor" href="#方法-6"><span>方法</span></a></h4><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code><span class="line"><span class="token class-name">DocumentCreateResponse</span> <span class="token function">createDocumentByFile</span><span class="token punctuation">(</span><span class="token class-name">DocumentCreateByFileRequest</span> request<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="请求参数-6" tabindex="-1"><a class="header-anchor" href="#请求参数-6"><span>请求参数</span></a></h4><p>DocumentCreateByFileRequest</p><table><thead><tr><th>参数名</th><th>类型</th><th>是否必须</th><th>描述</th></tr></thead><tbody><tr><td>datasetId</td><td>String</td><td>是</td><td>知识库 id</td></tr><tr><td>name</td><td>String</td><td>是</td><td>文档名称</td></tr><tr><td>file</td><td>MultipartFile</td><td>是</td><td>文档文件</td></tr><tr><td>docType</td><td>DocTypeEnum</td><td>否</td><td>文档类型</td></tr><tr><td>docMetadata</td><td><code>Map&lt;String, Object&gt;</code></td><td>否</td><td>文档元数据（如提供文档类型则必填）</td></tr><tr><td>indexingTechnique</td><td>IndexingTechniqueEnum</td><td>否</td><td>索引模式</td></tr><tr><td>docForm</td><td>DocFormEnum</td><td>否</td><td>文档形式</td></tr><tr><td>docLanguage</td><td>String</td><td>否</td><td>文档语言</td></tr><tr><td>processRule</td><td>ProcessRule</td><td>否</td><td>处理规则</td></tr><tr><td>retrievalModel</td><td>RetrievalModel</td><td>否</td><td>检索模型</td></tr><tr><td>embeddingModel</td><td>String</td><td>否</td><td>嵌入模型</td></tr><tr><td>embeddingModelProvider</td><td>String</td><td>否</td><td>嵌入模型提供商</td></tr></tbody></table><h4 id="响应参数-6" tabindex="-1"><a class="header-anchor" href="#响应参数-6"><span>响应参数</span></a></h4><p>DocumentCreateResponse</p><table><thead><tr><th>参数名</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>document</td><td>DocumentInfo</td><td>文档信息</td></tr><tr><td>batch</td><td>String</td><td>批次号</td></tr></tbody></table><h3 id="_2-3-通过文本更新文档" tabindex="-1"><a class="header-anchor" href="#_2-3-通过文本更新文档"><span>2.3 通过文本更新文档</span></a></h3><h4 id="方法-7" tabindex="-1"><a class="header-anchor" href="#方法-7"><span>方法</span></a></h4><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code><span class="line"><span class="token class-name">DocumentCreateResponse</span> <span class="token function">updateDocumentByText</span><span class="token punctuation">(</span><span class="token class-name">DocumentUpdateByTextRequest</span> request<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="请求参数-7" tabindex="-1"><a class="header-anchor" href="#请求参数-7"><span>请求参数</span></a></h4><p>DocumentUpdateByTextRequest</p><table><thead><tr><th>参数名</th><th>类型</th><th>是否必须</th><th>描述</th></tr></thead><tbody><tr><td>datasetId</td><td>String</td><td>是</td><td>知识库 id</td></tr><tr><td>documentId</td><td>String</td><td>是</td><td>文档 id</td></tr><tr><td>name</td><td>String</td><td>否</td><td>文档名称</td></tr><tr><td>text</td><td>String</td><td>是</td><td>文档内容</td></tr><tr><td>docType</td><td>DocTypeEnum</td><td>否</td><td>文档类型</td></tr><tr><td>docMetadata</td><td><code>Map&lt;String, Object&gt;</code></td><td>否</td><td>文档元数据（如提供文档类型则必填）</td></tr><tr><td>indexingTechnique</td><td>IndexingTechniqueEnum</td><td>否</td><td>索引模式</td></tr><tr><td>docForm</td><td>DocFormEnum</td><td>否</td><td>文档形式</td></tr><tr><td>docLanguage</td><td>String</td><td>否</td><td>文档语言</td></tr><tr><td>processRule</td><td>ProcessRule</td><td>否</td><td>处理规则</td></tr></tbody></table><h4 id="响应参数-7" tabindex="-1"><a class="header-anchor" href="#响应参数-7"><span>响应参数</span></a></h4><p>DocumentCreateResponse</p><table><thead><tr><th>参数名</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>document</td><td>DocumentInfo</td><td>文档信息</td></tr><tr><td>batch</td><td>String</td><td>批次号</td></tr></tbody></table><h3 id="_2-4-通过文件更新文档" tabindex="-1"><a class="header-anchor" href="#_2-4-通过文件更新文档"><span>2.4 通过文件更新文档</span></a></h3><h4 id="方法-8" tabindex="-1"><a class="header-anchor" href="#方法-8"><span>方法</span></a></h4><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code><span class="line"><span class="token class-name">DocumentCreateResponse</span> <span class="token function">updateDocumentByFile</span><span class="token punctuation">(</span><span class="token class-name">DocumentUpdateByFileRequest</span> request<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="请求参数-8" tabindex="-1"><a class="header-anchor" href="#请求参数-8"><span>请求参数</span></a></h4><p>DocumentUpdateByFileRequest</p><table><thead><tr><th>参数名</th><th>类型</th><th>是否必须</th><th>描述</th></tr></thead><tbody><tr><td>datasetId</td><td>String</td><td>是</td><td>知识库 id</td></tr><tr><td>documentId</td><td>String</td><td>是</td><td>文档 id</td></tr><tr><td>name</td><td>String</td><td>否</td><td>文档名称</td></tr><tr><td>file</td><td>MultipartFile</td><td>是</td><td>文档文件</td></tr><tr><td>docType</td><td>DocTypeEnum</td><td>否</td><td>文档类型</td></tr><tr><td>docMetadata</td><td><code>Map&lt;String, Object&gt;</code></td><td>否</td><td>文档元数据（如提供文档类型则必填）</td></tr><tr><td>indexingTechnique</td><td>IndexingTechniqueEnum</td><td>否</td><td>索引模式</td></tr><tr><td>docForm</td><td>DocFormEnum</td><td>否</td><td>文档形式</td></tr><tr><td>docLanguage</td><td>String</td><td>否</td><td>文档语言</td></tr><tr><td>processRule</td><td>ProcessRule</td><td>否</td><td>处理规则</td></tr></tbody></table><h4 id="响应参数-8" tabindex="-1"><a class="header-anchor" href="#响应参数-8"><span>响应参数</span></a></h4><p>DocumentCreateResponse</p><table><thead><tr><th>参数名</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>document</td><td>DocumentInfo</td><td>文档信息</td></tr><tr><td>batch</td><td>String</td><td>批次号</td></tr></tbody></table><h3 id="_2-5-分页查询文档列表" tabindex="-1"><a class="header-anchor" href="#_2-5-分页查询文档列表"><span>2.5 分页查询文档列表</span></a></h3><h4 id="方法-9" tabindex="-1"><a class="header-anchor" href="#方法-9"><span>方法</span></a></h4><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code><span class="line"><span class="token class-name">DifyPageResult</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">DocumentInfo</span><span class="token punctuation">&gt;</span></span> <span class="token function">pageDocument</span><span class="token punctuation">(</span><span class="token class-name">DatasetPageDocumentRequest</span> request<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="请求参数-9" tabindex="-1"><a class="header-anchor" href="#请求参数-9"><span>请求参数</span></a></h4><p>DatasetPageDocumentRequest</p><table><thead><tr><th>参数名</th><th>类型</th><th>是否必须</th><th>描述</th></tr></thead><tbody><tr><td>datasetId</td><td>String</td><td>是</td><td>知识库 id</td></tr><tr><td>keyword</td><td>String</td><td>否</td><td>搜索关键词</td></tr><tr><td>page</td><td>Integer</td><td>否</td><td>页码，默认1</td></tr><tr><td>limit</td><td>Integer</td><td>否</td><td>每页记录数，默认20条</td></tr></tbody></table><h4 id="响应参数-9" tabindex="-1"><a class="header-anchor" href="#响应参数-9"><span>响应参数</span></a></h4><p><code>DifyPageResult&lt;DocumentInfo&gt;</code></p><table><thead><tr><th>参数名</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>list</td><td><code>List&lt;DocumentInfo&gt;</code></td><td>文档列表</td></tr><tr><td>total</td><td>Long</td><td>总记录数</td></tr><tr><td>page</td><td>Integer</td><td>当前页码</td></tr><tr><td>limit</td><td>Integer</td><td>每页记录数</td></tr><tr><td>pages</td><td>Integer</td><td>总页数</td></tr></tbody></table><p>DocumentInfo</p><table><thead><tr><th>参数名</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>id</td><td>String</td><td>文档 id</td></tr><tr><td>position</td><td>Integer</td><td>位置</td></tr><tr><td>dataSourceType</td><td>String</td><td>数据源类型</td></tr><tr><td>dataSourceInfo</td><td><code>Map&lt;String, Object&gt;</code></td><td>数据源信息</td></tr><tr><td>datasetProcessRuleId</td><td>String</td><td>知识库处理规则ID</td></tr><tr><td>name</td><td>String</td><td>文档名称</td></tr><tr><td>createdFrom</td><td>String</td><td>创建来源</td></tr><tr><td>createdBy</td><td>String</td><td>创建人</td></tr><tr><td>createdAt</td><td>Long</td><td>创建时间戳</td></tr><tr><td>tokens</td><td>Integer</td><td>令牌数量</td></tr><tr><td>indexingStatus</td><td>String</td><td>索引状态</td></tr><tr><td>error</td><td>String</td><td>错误信息</td></tr><tr><td>enabled</td><td>String</td><td>是否启用</td></tr><tr><td>disabledAt</td><td>Long</td><td>禁用时间</td></tr><tr><td>disabledBy</td><td>String</td><td>禁用人</td></tr><tr><td>archived</td><td>String</td><td>是否归档</td></tr><tr><td>displayStatus</td><td>String</td><td>显示状态</td></tr><tr><td>wordCount</td><td>String</td><td>单词数量</td></tr><tr><td>hitCount</td><td>String</td><td>命中次数</td></tr><tr><td>docForm</td><td>String</td><td>文档形式</td></tr></tbody></table><h3 id="_2-6-查询文档索引状态" tabindex="-1"><a class="header-anchor" href="#_2-6-查询文档索引状态"><span>2.6 查询文档索引状态</span></a></h3><h4 id="方法-10" tabindex="-1"><a class="header-anchor" href="#方法-10"><span>方法</span></a></h4><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code><span class="line"><span class="token class-name">DocumentIndexingStatusResponse</span> <span class="token function">indexingStatus</span><span class="token punctuation">(</span><span class="token class-name">DocumentIndexingStatusRequest</span> request<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="请求参数-10" tabindex="-1"><a class="header-anchor" href="#请求参数-10"><span>请求参数</span></a></h4><p>DocumentIndexingStatusRequest</p><table><thead><tr><th>参数名</th><th>类型</th><th>是否必须</th><th>描述</th></tr></thead><tbody><tr><td>datasetId</td><td>String</td><td>是</td><td>知识库 id</td></tr><tr><td>batch</td><td>String</td><td>是</td><td>批次号</td></tr></tbody></table><h4 id="响应参数-10" tabindex="-1"><a class="header-anchor" href="#响应参数-10"><span>响应参数</span></a></h4><p>DocumentIndexingStatusResponse</p><table><thead><tr><th>参数名</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>data</td><td><code>List&lt;ProcessingStatus&gt; </code></td><td>处理状态列表</td></tr></tbody></table><p><strong>ProcessingStatus 对象结构</strong></p><table><thead><tr><th>参数名</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>id</td><td>String</td><td>文档 id</td></tr><tr><td>indexingStatus</td><td>String</td><td>索引状态</td></tr><tr><td>processingStartedAt</td><td>Long</td><td>处理开始时间戳</td></tr><tr><td>parsingCompletedAt</td><td>Long</td><td>解析完成时间戳</td></tr><tr><td>cleaningCompletedAt</td><td>Long</td><td>清洗完成时间戳</td></tr><tr><td>splittingCompletedAt</td><td>Long</td><td>分片完成时间戳</td></tr><tr><td>completedAt</td><td>Long</td><td>处理完成时间戳</td></tr><tr><td>pausedAt</td><td>Long</td><td>暂停时间戳</td></tr><tr><td>error</td><td>String</td><td>错误信息</td></tr><tr><td>stoppedAt</td><td>Long</td><td>停止时间戳</td></tr><tr><td>completedSegments</td><td>Integer</td><td>已完成的分片数量</td></tr><tr><td>totalSegments</td><td>Integer</td><td>总分片数量</td></tr></tbody></table><h3 id="_2-7-删除文档" tabindex="-1"><a class="header-anchor" href="#_2-7-删除文档"><span>2.7 删除文档</span></a></h3><h4 id="方法-11" tabindex="-1"><a class="header-anchor" href="#方法-11"><span>方法</span></a></h4><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code><span class="line"><span class="token keyword">void</span> <span class="token function">deleteDocument</span><span class="token punctuation">(</span><span class="token class-name">String</span> datasetId<span class="token punctuation">,</span> <span class="token class-name">String</span> documentId<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">void</span> <span class="token function">deleteDocument</span><span class="token punctuation">(</span><span class="token class-name">String</span> datasetId<span class="token punctuation">,</span> <span class="token class-name">String</span> documentId<span class="token punctuation">,</span> <span class="token class-name">String</span> apiKey<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="请求参数-11" tabindex="-1"><a class="header-anchor" href="#请求参数-11"><span>请求参数</span></a></h4><table><thead><tr><th>参数名</th><th>类型</th><th>是否必须</th><th>描述</th></tr></thead><tbody><tr><td>datasetId</td><td>String</td><td>是</td><td>知识库 id</td></tr><tr><td>documentId</td><td>String</td><td>是</td><td>文档 id</td></tr></tbody></table><h4 id="响应参数-11" tabindex="-1"><a class="header-anchor" href="#响应参数-11"><span>响应参数</span></a></h4><p>无</p><h3 id="_2-8-获取上传文件信息" tabindex="-1"><a class="header-anchor" href="#_2-8-获取上传文件信息"><span>2.8 获取上传文件信息</span></a></h3><h4 id="方法-12" tabindex="-1"><a class="header-anchor" href="#方法-12"><span>方法</span></a></h4><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code><span class="line"><span class="token class-name">UploadFileInfoResponse</span> <span class="token function">uploadFileInfo</span><span class="token punctuation">(</span><span class="token class-name">String</span> datasetId<span class="token punctuation">,</span> <span class="token class-name">String</span> documentId<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token class-name">UploadFileInfoResponse</span> <span class="token function">uploadFileInfo</span><span class="token punctuation">(</span><span class="token class-name">String</span> datasetId<span class="token punctuation">,</span> <span class="token class-name">String</span> documentId<span class="token punctuation">,</span> <span class="token class-name">String</span> apiKey<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="请求参数-12" tabindex="-1"><a class="header-anchor" href="#请求参数-12"><span>请求参数</span></a></h4><table><thead><tr><th>参数名</th><th>类型</th><th>是否必须</th><th>描述</th></tr></thead><tbody><tr><td>datasetId</td><td>String</td><td>是</td><td>知识库 id</td></tr><tr><td>documentId</td><td>String</td><td>是</td><td>文档 id</td></tr></tbody></table><h4 id="响应参数-12" tabindex="-1"><a class="header-anchor" href="#响应参数-12"><span>响应参数</span></a></h4><p>UploadFileInfoResponse</p><table><thead><tr><th>参数名</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>id</td><td>String</td><td>文件ID</td></tr><tr><td>name</td><td>String</td><td>文件名</td></tr><tr><td>size</td><td>Integer</td><td>文件大小</td></tr><tr><td>extension</td><td>String</td><td>文件扩展名</td></tr><tr><td>url</td><td>String</td><td>文件访问URL</td></tr><tr><td>downloadUrl</td><td>String</td><td>文件下载URL</td></tr><tr><td>mimeType</td><td>String</td><td>MIME类型</td></tr><tr><td>createdBy</td><td>String</td><td>创建人</td></tr><tr><td>createdAt</td><td>Long</td><td>创建时间戳</td></tr></tbody></table><h2 id="_3-分段管理" tabindex="-1"><a class="header-anchor" href="#_3-分段管理"><span>3. 分段管理</span></a></h2><h3 id="_3-1-创建分段" tabindex="-1"><a class="header-anchor" href="#_3-1-创建分段"><span>3.1 创建分段</span></a></h3><h4 id="方法-13" tabindex="-1"><a class="header-anchor" href="#方法-13"><span>方法</span></a></h4><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code><span class="line"><span class="token class-name">SegmentResponse</span> <span class="token function">createSegment</span><span class="token punctuation">(</span><span class="token class-name">SegmentCreateRequest</span> request<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="请求参数-13" tabindex="-1"><a class="header-anchor" href="#请求参数-13"><span>请求参数</span></a></h4><p>SegmentCreateRequest</p><table><thead><tr><th>参数名</th><th>类型</th><th>是否必须</th><th>描述</th></tr></thead><tbody><tr><td>datasetId</td><td>String</td><td>是</td><td>知识库 id</td></tr><tr><td>documentId</td><td>String</td><td>是</td><td>文档 id</td></tr><tr><td>segments</td><td><code>List&lt;SegmentParam&gt;</code></td><td>是</td><td>分段参数列表</td></tr></tbody></table><h4 id="响应参数-13" tabindex="-1"><a class="header-anchor" href="#响应参数-13"><span>响应参数</span></a></h4><p>SegmentResponse</p><table><thead><tr><th>参数名</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>data</td><td><code>List&lt;SegmentData&gt;</code></td><td>分段数据列表</td></tr><tr><td>docForm</td><td>String</td><td>文档形式</td></tr></tbody></table><p><strong>SegmentData 对象结构</strong></p><table><thead><tr><th>参数名</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>id</td><td>String</td><td>分段 id</td></tr><tr><td>position</td><td>Integer</td><td>位置</td></tr><tr><td>content</td><td>String</td><td>分段内容</td></tr><tr><td>answer</td><td>String</td><td>答案</td></tr><tr><td>wordCount</td><td>Integer</td><td>单词数量</td></tr><tr><td>tokens</td><td>Integer</td><td>令牌数量</td></tr><tr><td>indexingStatus</td><td>String</td><td>索引状态</td></tr><tr><td>error</td><td>String</td><td>错误信息</td></tr><tr><td>enabled</td><td>String</td><td>是否启用</td></tr><tr><td>disabledAt</td><td>Long</td><td>禁用时间</td></tr><tr><td>disabledBy</td><td>String</td><td>禁用人</td></tr><tr><td>archived</td><td>Boolean</td><td>是否归档</td></tr></tbody></table><p><strong>SegmentParam 对象结构</strong></p><table><thead><tr><th>参数名</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>content</td><td>String</td><td>分段内容</td></tr><tr><td>answer</td><td>String</td><td>分段答案</td></tr><tr><td>keywords</td><td><code> List&lt;String&gt;</code></td><td>关键词列表</td></tr></tbody></table><h3 id="_3-2-分页查询分段列表" tabindex="-1"><a class="header-anchor" href="#_3-2-分页查询分段列表"><span>3.2 分页查询分段列表</span></a></h3><h4 id="方法-14" tabindex="-1"><a class="header-anchor" href="#方法-14"><span>方法</span></a></h4><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code><span class="line"><span class="token class-name">SegmentResponse</span> <span class="token function">pageSegment</span><span class="token punctuation">(</span><span class="token class-name">SegmentPageRequest</span> request<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="请求参数-14" tabindex="-1"><a class="header-anchor" href="#请求参数-14"><span>请求参数</span></a></h4><p>SegmentPageRequest</p><table><thead><tr><th>参数名</th><th>类型</th><th>是否必须</th><th>描述</th></tr></thead><tbody><tr><td>datasetId</td><td>String</td><td>是</td><td>知识库 id</td></tr><tr><td>documentId</td><td>String</td><td>是</td><td>文档 id</td></tr><tr><td>keyword</td><td>String</td><td>否</td><td>搜索关键词</td></tr><tr><td>status</td><td>String</td><td>否</td><td>状态过滤</td></tr></tbody></table><h4 id="响应参数-14" tabindex="-1"><a class="header-anchor" href="#响应参数-14"><span>响应参数</span></a></h4><p>SegmentResponse</p><table><thead><tr><th>参数名</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>data</td><td><code>List&lt;SegmentData&gt; </code></td><td>分段数据列表</td></tr><tr><td>docForm</td><td>String</td><td>文档形式</td></tr></tbody></table><p><strong>SegmentData 对象结构</strong></p><table><thead><tr><th>参数名</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>id</td><td>String</td><td>分段 id</td></tr><tr><td>position</td><td>Integer</td><td>位置</td></tr><tr><td>content</td><td>String</td><td>分段内容</td></tr><tr><td>answer</td><td>String</td><td>答案</td></tr><tr><td>wordCount</td><td>Integer</td><td>单词数量</td></tr><tr><td>tokens</td><td>Integer</td><td>令牌数量</td></tr><tr><td>indexingStatus</td><td>String</td><td>索引状态</td></tr><tr><td>error</td><td>String</td><td>错误信息</td></tr><tr><td>enabled</td><td>String</td><td>是否启用</td></tr><tr><td>disabledAt</td><td>Long</td><td>禁用时间</td></tr><tr><td>disabledBy</td><td>String</td><td>禁用人</td></tr><tr><td>archived</td><td>Boolean</td><td>是否归档</td></tr></tbody></table><h3 id="_3-3-删除分段" tabindex="-1"><a class="header-anchor" href="#_3-3-删除分段"><span>3.3 删除分段</span></a></h3><h4 id="方法-15" tabindex="-1"><a class="header-anchor" href="#方法-15"><span>方法</span></a></h4><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code><span class="line"><span class="token keyword">void</span> <span class="token function">deleteSegment</span><span class="token punctuation">(</span><span class="token class-name">String</span> datasetId<span class="token punctuation">,</span> <span class="token class-name">String</span> documentId<span class="token punctuation">,</span> <span class="token class-name">String</span> segmentId<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">void</span> <span class="token function">deleteSegment</span><span class="token punctuation">(</span><span class="token class-name">String</span> datasetId<span class="token punctuation">,</span> <span class="token class-name">String</span> documentId<span class="token punctuation">,</span> <span class="token class-name">String</span> segmentId<span class="token punctuation">,</span> <span class="token class-name">String</span> apiKey<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="请求参数-15" tabindex="-1"><a class="header-anchor" href="#请求参数-15"><span>请求参数</span></a></h4><table><thead><tr><th>参数名</th><th>类型</th><th>是否必须</th><th>描述</th></tr></thead><tbody><tr><td>datasetId</td><td>String</td><td>是</td><td>知识库 id</td></tr><tr><td>documentId</td><td>String</td><td>是</td><td>文档 id</td></tr><tr><td>segmentId</td><td>String</td><td>是</td><td>分段 id</td></tr></tbody></table><h4 id="响应参数-15" tabindex="-1"><a class="header-anchor" href="#响应参数-15"><span>响应参数</span></a></h4><p>无</p><h3 id="_3-4-更新分段" tabindex="-1"><a class="header-anchor" href="#_3-4-更新分段"><span>3.4 更新分段</span></a></h3><h4 id="方法-16" tabindex="-1"><a class="header-anchor" href="#方法-16"><span>方法</span></a></h4><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code><span class="line"><span class="token class-name">SegmentUpdateResponse</span> <span class="token function">updateSegment</span><span class="token punctuation">(</span><span class="token class-name">SegmentUpdateRequest</span> request<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="请求参数-16" tabindex="-1"><a class="header-anchor" href="#请求参数-16"><span>请求参数</span></a></h4><p>SegmentUpdateRequest</p><table><thead><tr><th>参数名</th><th>类型</th><th>是否必须</th><th>描述</th></tr></thead><tbody><tr><td>datasetId</td><td>String</td><td>是</td><td>知识库 id</td></tr><tr><td>documentId</td><td>String</td><td>是</td><td>文档 id</td></tr><tr><td>segmentId</td><td>String</td><td>是</td><td>分段 id</td></tr><tr><td>segment</td><td>SegmentParam</td><td>是</td><td>分段参数</td></tr></tbody></table><h4 id="响应参数-16" tabindex="-1"><a class="header-anchor" href="#响应参数-16"><span>响应参数</span></a></h4><p>SegmentUpdateResponse</p><table><thead><tr><th>参数名</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>data</td><td>SegmentData</td><td>分段数据</td></tr><tr><td>docForm</td><td>String</td><td>文档形式</td></tr></tbody></table><p><strong>SegmentData 对象结构</strong></p><table><thead><tr><th>参数名</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>id</td><td>String</td><td>分段 id</td></tr><tr><td>position</td><td>Integer</td><td>位置</td></tr><tr><td>content</td><td>String</td><td>分段内容</td></tr><tr><td>answer</td><td>String</td><td>答案</td></tr><tr><td>wordCount</td><td>Integer</td><td>单词数量</td></tr><tr><td>tokens</td><td>Integer</td><td>令牌数量</td></tr><tr><td>indexingStatus</td><td>String</td><td>索引状态</td></tr><tr><td>error</td><td>String</td><td>错误信息</td></tr><tr><td>enabled</td><td>String</td><td>是否启用</td></tr><tr><td>disabledAt</td><td>Long</td><td>禁用时间</td></tr><tr><td>disabledBy</td><td>String</td><td>禁用人</td></tr><tr><td>archived</td><td>Boolean</td><td>是否归档</td></tr></tbody></table><p><strong>SegmentParam 对象结构</strong></p><table><thead><tr><th>参数名</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>content</td><td>String</td><td>分段内容</td></tr><tr><td>answer</td><td>String</td><td>分段答案</td></tr><tr><td>keywords</td><td><code>List&lt;String&gt;</code></td><td>关键词列表</td></tr></tbody></table><h2 id="_4-子分段管理" tabindex="-1"><a class="header-anchor" href="#_4-子分段管理"><span>4 子分段管理</span></a></h2><p>子分段（Child Chunk）是分段（Segment）的下一级细分单元，用于更细粒度的内容组织和检索。</p><h3 id="_4-1-创建子分段" tabindex="-1"><a class="header-anchor" href="#_4-1-创建子分段"><span>4.1 创建子分段</span></a></h3><h4 id="方法-17" tabindex="-1"><a class="header-anchor" href="#方法-17"><span>方法</span></a></h4><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code><span class="line"><span class="token class-name">SegmentChildChunkCreateResponse</span> <span class="token function">createSegmentChildChunk</span><span class="token punctuation">(</span><span class="token class-name">SegmentChildChunkCreateRequest</span> request<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="请求参数-17" tabindex="-1"><a class="header-anchor" href="#请求参数-17"><span>请求参数</span></a></h4><p>SegmentChildChunkCreateRequest</p><table><thead><tr><th>参数名</th><th>类型</th><th>是否必须</th><th>描述</th></tr></thead><tbody><tr><td>datasetId</td><td>String</td><td>是</td><td>知识库 id</td></tr><tr><td>documentId</td><td>String</td><td>是</td><td>文档 id</td></tr><tr><td>segmentId</td><td>String</td><td>是</td><td>分段 id</td></tr><tr><td>content</td><td>String</td><td>是</td><td>子分段内容</td></tr></tbody></table><h4 id="响应参数-17" tabindex="-1"><a class="header-anchor" href="#响应参数-17"><span>响应参数</span></a></h4><p>SegmentChildChunkCreateResponse</p><table><thead><tr><th>参数名</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>data</td><td>SegmentChildChunkResponse</td><td>子分段数据</td></tr></tbody></table><p><strong>SegmentChildChunkResponse 对象结构</strong></p><table><thead><tr><th>参数名</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>id</td><td>String</td><td>子分段 id</td></tr><tr><td>segmentId</td><td>String</td><td>所属分段 id</td></tr><tr><td>content</td><td>String</td><td>子分段内容</td></tr><tr><td>wordCount</td><td>Integer</td><td>单词数量</td></tr><tr><td>tokens</td><td>Integer</td><td>令牌数量</td></tr><tr><td>indexNodeId</td><td>String</td><td>索引节点ID</td></tr><tr><td>indexNodeHash</td><td>String</td><td>索引节点哈希</td></tr><tr><td>status</td><td>String</td><td>状态</td></tr><tr><td>createdBy</td><td>String</td><td>创建人</td></tr><tr><td>createdAt</td><td>Long</td><td>创建时间戳</td></tr><tr><td>indexingAt</td><td>Long</td><td>索引时间戳</td></tr><tr><td>completedAt</td><td>Long</td><td>完成时间戳</td></tr><tr><td>error</td><td>String</td><td>错误信息</td></tr><tr><td>stoppedAt</td><td>Long</td><td>停止时间戳</td></tr></tbody></table><h3 id="_4-2-分页查询子分段列表" tabindex="-1"><a class="header-anchor" href="#_4-2-分页查询子分段列表"><span>4.2 分页查询子分段列表</span></a></h3><h4 id="方法-18" tabindex="-1"><a class="header-anchor" href="#方法-18"><span>方法</span></a></h4><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code><span class="line"><span class="token class-name">DifyPageResult</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">SegmentChildChunkResponse</span><span class="token punctuation">&gt;</span></span> <span class="token function">pageSegmentChildChunk</span><span class="token punctuation">(</span><span class="token class-name">SegmentChildChunkPageRequest</span> request<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="请求参数-18" tabindex="-1"><a class="header-anchor" href="#请求参数-18"><span>请求参数</span></a></h4><p>SegmentChildChunkPageRequest</p><table><thead><tr><th>参数名</th><th>类型</th><th>是否必须</th><th>描述</th></tr></thead><tbody><tr><td>datasetId</td><td>String</td><td>是</td><td>知识库 id</td></tr><tr><td>documentId</td><td>String</td><td>是</td><td>文档 id</td></tr><tr><td>segmentId</td><td>String</td><td>是</td><td>分段 id</td></tr><tr><td>keyword</td><td>String</td><td>否</td><td>搜索关键词</td></tr><tr><td>page</td><td>Integer</td><td>否</td><td>页码</td></tr><tr><td>limit</td><td>Integer</td><td>否</td><td>每页记录数</td></tr></tbody></table><h4 id="响应参数-18" tabindex="-1"><a class="header-anchor" href="#响应参数-18"><span>响应参数</span></a></h4><p><code>DifyPageResult&lt;SegmentChildChunkResponse&gt;</code></p><table><thead><tr><th>参数名</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>list</td><td><code>List&lt;SegmentChildChunkResponse&gt;</code></td><td>子分段列表</td></tr><tr><td>total</td><td>Long</td><td>总记录数</td></tr><tr><td>page</td><td>Integer</td><td>当前页码</td></tr><tr><td>limit</td><td>Integer</td><td>每页记录数</td></tr><tr><td>pages</td><td>Integer</td><td>总页数</td></tr></tbody></table><h3 id="_4-3-更新子分段" tabindex="-1"><a class="header-anchor" href="#_4-3-更新子分段"><span>4.3 更新子分段</span></a></h3><h4 id="方法-19" tabindex="-1"><a class="header-anchor" href="#方法-19"><span>方法</span></a></h4><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code><span class="line"><span class="token class-name">SegmentChildChunkUpdateResponse</span> <span class="token function">updateSegmentChildChunk</span><span class="token punctuation">(</span><span class="token class-name">SegmentChildChunkUpdateRequest</span> request<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="请求参数-19" tabindex="-1"><a class="header-anchor" href="#请求参数-19"><span>请求参数</span></a></h4><p>SegmentChildChunkUpdateRequest</p><table><thead><tr><th>参数名</th><th>类型</th><th>是否必须</th><th>描述</th></tr></thead><tbody><tr><td>datasetId</td><td>String</td><td>是</td><td>知识库 id</td></tr><tr><td>documentId</td><td>String</td><td>是</td><td>文档 id</td></tr><tr><td>segmentId</td><td>String</td><td>是</td><td>分段 id</td></tr><tr><td>childChunkId</td><td>String</td><td>是</td><td>子分段 id</td></tr><tr><td>content</td><td>String</td><td>是</td><td>子分段内容</td></tr></tbody></table><h4 id="响应参数-19" tabindex="-1"><a class="header-anchor" href="#响应参数-19"><span>响应参数</span></a></h4><p>SegmentChildChunkUpdateResponse</p><table><thead><tr><th>参数名</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>data</td><td>SegmentChildChunkResponse</td><td>子分段数据</td></tr></tbody></table><h3 id="_4-4-删除子分段" tabindex="-1"><a class="header-anchor" href="#_4-4-删除子分段"><span>4.4 删除子分段</span></a></h3><h4 id="方法-20" tabindex="-1"><a class="header-anchor" href="#方法-20"><span>方法</span></a></h4><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code><span class="line"> <span class="token keyword">void</span> <span class="token function">deleteSegmentChildChunk</span><span class="token punctuation">(</span><span class="token class-name">SegmentChildChunkDeleteRequest</span> request<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="请求参数-20" tabindex="-1"><a class="header-anchor" href="#请求参数-20"><span>请求参数</span></a></h4><p>SegmentChildChunkDeleteRequest</p><table><thead><tr><th>参数名</th><th>类型</th><th>是否必须</th><th>描述</th></tr></thead><tbody><tr><td>datasetId</td><td>String</td><td>是</td><td>知识库 id</td></tr><tr><td>documentId</td><td>String</td><td>是</td><td>文档 id</td></tr><tr><td>segmentId</td><td>String</td><td>是</td><td>分段 id</td></tr><tr><td>childChunkId</td><td>String</td><td>是</td><td>子分段 id</td></tr></tbody></table><h4 id="响应参数-20" tabindex="-1"><a class="header-anchor" href="#响应参数-20"><span>响应参数</span></a></h4><p>无</p><h2 id="_5-数据检索" tabindex="-1"><a class="header-anchor" href="#_5-数据检索"><span>5. 数据检索</span></a></h2><h3 id="_5-1-检索数据" tabindex="-1"><a class="header-anchor" href="#_5-1-检索数据"><span>5.1 检索数据</span></a></h3><h4 id="方法-21" tabindex="-1"><a class="header-anchor" href="#方法-21"><span>方法</span></a></h4><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code><span class="line"><span class="token class-name">RetrieveResponse</span> <span class="token function">retrieve</span><span class="token punctuation">(</span><span class="token class-name">RetrieveRequest</span> request<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="请求参数-21" tabindex="-1"><a class="header-anchor" href="#请求参数-21"><span>请求参数</span></a></h4><p>RetrieveRequest</p><table><thead><tr><th>参数名</th><th>类型</th><th>是否必须</th><th>描述</th></tr></thead><tbody><tr><td>datasetId</td><td>String</td><td>是</td><td>知识库 id</td></tr><tr><td>query</td><td>String</td><td>是</td><td>检索查询内容</td></tr><tr><td>retrievalModel</td><td>RetrievalModel</td><td>否</td><td>检索模型</td></tr></tbody></table><h4 id="响应参数-21" tabindex="-1"><a class="header-anchor" href="#响应参数-21"><span>响应参数</span></a></h4><p>RetrieveResponse</p><table><thead><tr><th>参数名</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>query</td><td>RetrieveQuery</td><td>查询信息</td></tr><tr><td>records</td><td><code>List&lt;RetrieveRecord&gt;</code></td><td>检索记录列表</td></tr></tbody></table><p><strong>RetrieveQuery 对象结构</strong></p><table><thead><tr><th>参数名</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>content</td><td>String</td><td>查询内容</td></tr></tbody></table><p><strong>RetrieveRecord 对象结构</strong></p><table><thead><tr><th>参数名</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>segment</td><td>Segment</td><td>分段信息</td></tr><tr><td>score</td><td>Float</td><td>相关性得分</td></tr><tr><td>tsnePosition</td><td>TsnePosition</td><td>TSNE位置信息</td></tr></tbody></table><p><strong>TsnePosition 对象结构</strong></p><table><thead><tr><th>参数名</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>x</td><td>Float</td><td>X坐标</td></tr><tr><td>y</td><td>Float</td><td>Y坐标</td></tr></tbody></table><p><strong>Segment 对象结构</strong></p><table><thead><tr><th>参数名</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>id</td><td>String</td><td>分段ID</td></tr><tr><td>position</td><td>Integer</td><td>位置</td></tr><tr><td>documentId</td><td>String</td><td>文档ID</td></tr><tr><td>content</td><td>String</td><td>分段内容</td></tr><tr><td>answer</td><td>String</td><td>答案</td></tr><tr><td>wordCount</td><td>Integer</td><td>单词数量</td></tr><tr><td>tokens</td><td>Integer</td><td>令牌数量</td></tr><tr><td>keywords</td><td><code>List&lt;String&gt;</code></td><td>关键词列表</td></tr><tr><td>indexNodeId</td><td>String</td><td>索引节点ID</td></tr><tr><td>indexNodeHash</td><td>String</td><td>索引节点哈希</td></tr><tr><td>hitCount</td><td>Integer</td><td>命中次数</td></tr><tr><td>enabled</td><td>String</td><td>是否启用</td></tr><tr><td>disabledAt</td><td>Long</td><td>禁用时间</td></tr><tr><td>disabledBy</td><td>String</td><td>禁用人</td></tr><tr><td>status</td><td>String</td><td>状态</td></tr><tr><td>createdAt</td><td>Long</td><td>创建时间</td></tr><tr><td>createdBy</td><td>String</td><td>创建人</td></tr><tr><td>indexingAt</td><td>Long</td><td>索引时间</td></tr><tr><td>completedAt</td><td>Long</td><td>完成时间</td></tr><tr><td>error</td><td>String</td><td>错误信息</td></tr><tr><td>stoppedAt</td><td>Long</td><td>停止时间</td></tr><tr><td>document</td><td>Document</td><td>文档信息</td></tr></tbody></table><p><strong>Document 对象结构</strong></p><table><thead><tr><th>参数名</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>id</td><td>String</td><td>文档ID</td></tr><tr><td>dataSourceType</td><td>String</td><td>数据源类型</td></tr><tr><td>name</td><td>String</td><td>文档名称</td></tr><tr><td>docType</td><td>String</td><td>文档类型</td></tr></tbody></table><h2 id="_6-元数据管理" tabindex="-1"><a class="header-anchor" href="#_6-元数据管理"><span>6. 元数据管理</span></a></h2><h3 id="_6-1-创建元数据" tabindex="-1"><a class="header-anchor" href="#_6-1-创建元数据"><span>6.1 创建元数据</span></a></h3><h4 id="方法-22" tabindex="-1"><a class="header-anchor" href="#方法-22"><span>方法</span></a></h4><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code><span class="line"><span class="token class-name">MetaDataResponse</span> <span class="token function">createMetaData</span><span class="token punctuation">(</span><span class="token class-name">MetaDataCreateRequest</span> request<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="请求参数-22" tabindex="-1"><a class="header-anchor" href="#请求参数-22"><span>请求参数</span></a></h4><p>MetaDataCreateRequest</p><table><thead><tr><th>参数名</th><th>类型</th><th>是否必须</th><th>描述</th></tr></thead><tbody><tr><td>datasetId</td><td>String</td><td>是</td><td>知识库 id</td></tr><tr><td>type</td><td>String</td><td>是</td><td>元数据类型</td></tr><tr><td>name</td><td>String</td><td>是</td><td>元数据名称</td></tr></tbody></table><h4 id="响应参数-22" tabindex="-1"><a class="header-anchor" href="#响应参数-22"><span>响应参数</span></a></h4><p>MetaDataResponse</p><table><thead><tr><th>参数名</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>id</td><td>String</td><td>元数据ID</td></tr><tr><td>type</td><td>String</td><td>元数据类型</td></tr><tr><td>name</td><td>String</td><td>元数据名称</td></tr></tbody></table><h3 id="_6-2-更新元数据" tabindex="-1"><a class="header-anchor" href="#_6-2-更新元数据"><span>6.2 更新元数据</span></a></h3><h4 id="方法-23" tabindex="-1"><a class="header-anchor" href="#方法-23"><span>方法</span></a></h4><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code><span class="line"><span class="token class-name">MetaDataResponse</span> <span class="token function">updateMetaData</span><span class="token punctuation">(</span><span class="token class-name">MetaDataUpdateRequest</span> request<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="请求参数-23" tabindex="-1"><a class="header-anchor" href="#请求参数-23"><span>请求参数</span></a></h4><p>MetaDataUpdateRequest</p><table><thead><tr><th>参数名</th><th>类型</th><th>是否必须</th><th>描述</th></tr></thead><tbody><tr><td>datasetId</td><td>String</td><td>是</td><td>知识库 id</td></tr><tr><td>metaDataId</td><td>String</td><td>是</td><td>元数据 id</td></tr><tr><td>name</td><td>String</td><td>是</td><td>元数据名称</td></tr></tbody></table><h4 id="响应参数-23" tabindex="-1"><a class="header-anchor" href="#响应参数-23"><span>响应参数</span></a></h4><p>MetaDataResponse 查看 6.1</p><h3 id="_6-3-删除元数据" tabindex="-1"><a class="header-anchor" href="#_6-3-删除元数据"><span>6.3 删除元数据</span></a></h3><h4 id="方法-24" tabindex="-1"><a class="header-anchor" href="#方法-24"><span>方法</span></a></h4><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code><span class="line"><span class="token class-name">MetaDataDeleteResponse</span> <span class="token function">deleteMetaData</span><span class="token punctuation">(</span><span class="token class-name">String</span> datasetId<span class="token punctuation">,</span> <span class="token class-name">String</span> metadataId<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token class-name">MetaDataDeleteResponse</span> <span class="token function">deleteMetaData</span><span class="token punctuation">(</span><span class="token class-name">String</span> datasetId<span class="token punctuation">,</span> <span class="token class-name">String</span> metadataId<span class="token punctuation">,</span> <span class="token class-name">String</span> apiKey<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="请求参数-24" tabindex="-1"><a class="header-anchor" href="#请求参数-24"><span>请求参数</span></a></h4><table><thead><tr><th>参数名</th><th>类型</th><th>是否必须</th><th>描述</th></tr></thead><tbody><tr><td>datasetId</td><td>String</td><td>是</td><td>知识库 id</td></tr><tr><td>metadataId</td><td>String</td><td>是</td><td>元数据 id</td></tr></tbody></table><h4 id="响应参数-24" tabindex="-1"><a class="header-anchor" href="#响应参数-24"><span>响应参数</span></a></h4><p>无</p><h3 id="_6-4-元数据操作" tabindex="-1"><a class="header-anchor" href="#_6-4-元数据操作"><span>6.4 元数据操作</span></a></h3><h4 id="方法-25" tabindex="-1"><a class="header-anchor" href="#方法-25"><span>方法</span></a></h4><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code><span class="line"><span class="token class-name">MetaDataActionResponse</span> <span class="token function">actionMetaData</span><span class="token punctuation">(</span><span class="token class-name">MetaDataActionRequest</span> request<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="请求参数-25" tabindex="-1"><a class="header-anchor" href="#请求参数-25"><span>请求参数</span></a></h4><p>MetaDataActionRequest</p><table><thead><tr><th>参数名</th><th>类型</th><th>是否必须</th><th>描述</th></tr></thead><tbody><tr><td>datasetId</td><td>String</td><td>是</td><td>知识库 id</td></tr><tr><td>action</td><td>MetaDataActionEnum</td><td>是</td><td>操作类型</td></tr></tbody></table><p><strong>MetaDataActionEnum 枚举值</strong></p><table><thead><tr><th>枚举值</th><th>描述</th></tr></thead><tbody><tr><td>enable</td><td>启用</td></tr><tr><td>disable</td><td>禁用</td></tr></tbody></table><h4 id="响应参数-25" tabindex="-1"><a class="header-anchor" href="#响应参数-25"><span>响应参数</span></a></h4><p>无</p><h3 id="_6-5-更新文档元数据" tabindex="-1"><a class="header-anchor" href="#_6-5-更新文档元数据"><span>6.5 更新文档元数据</span></a></h3><h4 id="方法-26" tabindex="-1"><a class="header-anchor" href="#方法-26"><span>方法</span></a></h4><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code><span class="line"><span class="token class-name">DocumentMetaDataUpdateResponse</span> <span class="token function">updateDocumentMetaData</span><span class="token punctuation">(</span><span class="token class-name">DocumentMetaDataUpdateRequest</span> request<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="请求参数-26" tabindex="-1"><a class="header-anchor" href="#请求参数-26"><span>请求参数</span></a></h4><p>DocumentMetaDataUpdateRequest</p><table><thead><tr><th>参数名</th><th>类型</th><th>是否必须</th><th>描述</th></tr></thead><tbody><tr><td>datasetId</td><td>String</td><td>是</td><td>知识库 id</td></tr><tr><td>operationData</td><td><code>List&lt;OperationData&gt; </code></td><td>是</td><td>操作数据列表</td></tr></tbody></table><p><strong>OperationData 对象结构</strong></p><table><thead><tr><th>参数名</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>documentId</td><td>String</td><td>文档ID</td></tr><tr><td>metadataList</td><td><code>List&lt;MetaData&gt; </code></td><td>元数据列表</td></tr></tbody></table><p><strong>MetaData 对象结构</strong></p><table><thead><tr><th>参数名</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>id</td><td>String</td><td>元数据ID</td></tr><tr><td>type</td><td>String</td><td>元数据类型</td></tr><tr><td>name</td><td>String</td><td>元数据名称</td></tr><tr><td>value</td><td>String</td><td>元数据值</td></tr></tbody></table><h4 id="响应参数-26" tabindex="-1"><a class="header-anchor" href="#响应参数-26"><span>响应参数</span></a></h4><p>无</p><h3 id="_6-6-获取元数据列表" tabindex="-1"><a class="header-anchor" href="#_6-6-获取元数据列表"><span>6.6 获取元数据列表</span></a></h3><h4 id="方法-27" tabindex="-1"><a class="header-anchor" href="#方法-27"><span>方法</span></a></h4><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code><span class="line"><span class="token class-name">MetaDataListResponse</span> <span class="token function">listMetaData</span><span class="token punctuation">(</span><span class="token class-name">String</span> datasetId<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token class-name">MetaDataListResponse</span> <span class="token function">listMetaData</span><span class="token punctuation">(</span><span class="token class-name">String</span> datasetId<span class="token punctuation">,</span> <span class="token class-name">String</span> apiKey<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="请求参数-27" tabindex="-1"><a class="header-anchor" href="#请求参数-27"><span>请求参数</span></a></h4><table><thead><tr><th>参数名</th><th>类型</th><th>是否必须</th><th>描述</th></tr></thead><tbody><tr><td>datasetId</td><td>String</td><td>是</td><td>知识库 id</td></tr></tbody></table><h4 id="响应参数-27" tabindex="-1"><a class="header-anchor" href="#响应参数-27"><span>响应参数</span></a></h4><p>MetaDataListResponse</p><table><thead><tr><th>参数名</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>builtInFieldEnabled</td><td>Boolean</td><td>内置字段是否启用</td></tr><tr><td>docMetadata</td><td><code>List&lt;DocMetadata&gt; </code></td><td>文档元数据列表</td></tr></tbody></table><p><strong>DocMetadata 对象结构</strong></p><table><thead><tr><th>参数名</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>id</td><td>String</td><td>元数据ID</td></tr><tr><td>type</td><td>String</td><td>元数据类型</td></tr><tr><td>name</td><td>String</td><td>元数据名称</td></tr><tr><td>userCount</td><td>Integer</td><td>使用次数</td></tr></tbody></table><h2 id="_7-嵌入模型" tabindex="-1"><a class="header-anchor" href="#_7-嵌入模型"><span>7. 嵌入模型</span></a></h2><h3 id="_7-1-获取嵌入模型列表" tabindex="-1"><a class="header-anchor" href="#_7-1-获取嵌入模型列表"><span>7.1 获取嵌入模型列表</span></a></h3><h4 id="方法-28" tabindex="-1"><a class="header-anchor" href="#方法-28"><span>方法</span></a></h4><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code><span class="line"><span class="token class-name">TextEmbeddingListResponse</span> <span class="token function">listTextEmbedding</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token class-name">TextEmbeddingListResponse</span> <span class="token function">listTextEmbedding</span><span class="token punctuation">(</span><span class="token class-name">String</span> apikey<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="请求参数-28" tabindex="-1"><a class="header-anchor" href="#请求参数-28"><span>请求参数</span></a></h4><p>无</p><h4 id="响应参数-28" tabindex="-1"><a class="header-anchor" href="#响应参数-28"><span>响应参数</span></a></h4><p>TextEmbeddingListResponse</p><table><thead><tr><th>参数名</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>data</td><td><code>List&lt;TextEmbedding&gt;</code></td><td>嵌入模型列表</td></tr></tbody></table><p><strong>TextEmbedding 对象结构</strong></p><table><thead><tr><th>参数名</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>provider</td><td>String</td><td>提供商名称</td></tr><tr><td>label</td><td>TextEmbeddingLabel</td><td>标签信息</td></tr><tr><td>iconSmall</td><td>TextEmbeddingIcon</td><td>小图标</td></tr><tr><td>iconLarge</td><td>TextEmbeddingIcon</td><td>大图标</td></tr><tr><td>status</td><td>String</td><td>状态</td></tr><tr><td>models</td><td><code>List&lt;TextEmbeddingModel&gt;</code></td><td>模型列表</td></tr></tbody></table><p><strong>TextEmbeddingLabel 对象结构</strong></p><table><thead><tr><th>参数名</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>zhHans</td><td>String</td><td>中文简体标签</td></tr><tr><td>enUs</td><td>String</td><td>英文(美国)标签</td></tr></tbody></table><p><strong>TextEmbeddingIcon 对象结构</strong></p><table><thead><tr><th>参数名</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>zhHans</td><td>String</td><td>中文简体图标链接</td></tr><tr><td>enUs</td><td>String</td><td>英文(美国)图标链接</td></tr></tbody></table><p><strong>TextEmbeddingModel 对象结构</strong></p><table><thead><tr><th>参数名</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>model</td><td>String</td><td>模型标识符</td></tr><tr><td>label</td><td>TextEmbeddingLabel</td><td>模型标签</td></tr><tr><td>modelType</td><td>String</td><td>模型类型</td></tr><tr><td>features</td><td><code>List&lt;ModelFeatureEnum&gt;</code></td><td>特性列表</td></tr><tr><td>fetchFrom</td><td>String</td><td>获取来源</td></tr><tr><td>modelProperties</td><td>TextEmbeddingModelProperties</td><td>模型属性</td></tr><tr><td>deprecated</td><td>Boolean</td><td>是否已弃用</td></tr><tr><td>status</td><td>ModelStatusEnum</td><td>状态</td></tr><tr><td>loadBalancingEnabled</td><td>Boolean</td><td>是否启用负载均衡</td></tr></tbody></table><p><strong>TextEmbeddingModelProperties 对象结构</strong></p><table><thead><tr><th>参数名</th><th>类型</th><th>描述</th></tr></thead><tbody><tr><td>contextSize</td><td>Integer</td><td>上下文大小</td></tr><tr><td>maxChunks</td><td>Integer</td><td>最大块数量</td></tr></tbody></table><p><strong>ModelStatusEnum 枚举值</strong></p><table><thead><tr><th>枚举值</th><th>代码值</th><th>描述</th></tr></thead><tbody><tr><td>ACTIVE</td><td>active</td><td>激活</td></tr><tr><td>NO_CONFIGURE</td><td>no-configure</td><td>未配置</td></tr><tr><td>QUOTA_EXCEEDED</td><td>quota-exceeded</td><td>配额超出</td></tr><tr><td>NO_PERMISSION</td><td>no-permission</td><td>无权限</td></tr><tr><td>DISABLED</td><td>disabled</td><td>已禁用</td></tr></tbody></table><p><strong>ModelFeatureEnum 枚举值</strong></p><table><thead><tr><th>枚举值</th><th>代码值</th><th>描述</th></tr></thead><tbody><tr><td>TOOL_CALL</td><td>tool-call</td><td>工具调用</td></tr><tr><td>MULTI_TOOL_CALL</td><td>multi-tool-call</td><td>多工具调用</td></tr><tr><td>AGENT_THOUGHT</td><td>agent-thought</td><td>代理思考</td></tr><tr><td>VISION</td><td>vision</td><td>视觉</td></tr><tr><td>STREAM_TOOL_CALL</td><td>stream-tool-call</td><td>流式工具调用</td></tr><tr><td>DOCUMENT</td><td>document</td><td>文档</td></tr><tr><td>VIDEO</td><td>video</td><td>视频</td></tr><tr><td>AUDIO</td><td>audio</td><td>音频</td></tr></tbody></table>`,342)]))}const o=d(s,[["render",r],["__file","dataset.html.vue"]]),p=JSON.parse('{"path":"/guide/feature/dataset.html","title":"Dataset API","lang":"zh-cn","frontmatter":{"lang":"zh-cn","title":"Dataset API","description":null},"git":{"updatedTime":1747291825000,"contributors":[{"name":"yanghq","username":"yanghq","email":"1040926235@qq.com","commits":19,"url":"https://github.com/yanghq"},{"name":"過世秋風","username":"","email":"1040926235@qq.com","commits":4}],"changelog":[{"hash":"4ecae64f569ce8d229ca4377f61f2f85a9ba86e7","time":1747291825000,"email":"1040926235@qq.com","author":"yanghq","message":"code format"},{"hash":"5bad9eeb94e5ec8927225fb3d228050de61192b6","time":1747291650000,"email":"1040926235@qq.com","author":"yanghq","message":"doc: dateset info\\\\update"},{"hash":"59fa25379a7c78827890efd17504ea57a1e4b68b","time":1746015741000,"email":"1040926235@qq.com","author":"yanghq","message":"fix: Adapt to DIY 1.3.1 - chat updateAppAnnotation request method change put deleteAppAnnotation remove response - dataset deleteDocument remove response deleteSegment remove response deleteSegmentChildChunk remove response"},{"hash":"ac90d3ad464cda230b7fc45d2411d2308094358c","time":1744954134000,"email":"1040926235@qq.com","author":"yanghq","message":"reformat code"},{"hash":"7a16a774ad0ce12a059ea0e38bd7e4d7d4203cf8","time":1744881755000,"email":"1040926235@qq.com","author":"yanghq","message":"fix: WebClientUtil exceptionFunction"},{"hash":"ec8bbd85b1aeb127c97f04bea8c8bf81c805158a","time":1744879838000,"email":"1040926235@qq.com","author":"yanghq","message":"doc: update config"},{"hash":"f038b08430285afa49ef84b05491f205d187d9b3","time":1744872100000,"email":"1040926235@qq.com","author":"yanghq","message":"doc: dataset apikey desc"},{"hash":"de602d3a7fcf46eb9bc3e535134e2fbc9b083dfd","time":1744594726000,"email":"1040926235@qq.com","author":"yanghq","message":"doc: dataset document processRule model hierarchical"},{"hash":"31acfeffa099739163efba8f145d358b14f5adaf","time":1744341714000,"email":"1040926235@qq.com","author":"yanghq","message":"doc: child chunks"},{"hash":"c5ec03ce247e610cc669e9e4293a80ee30334014","time":1744268251000,"email":"1040926235@qq.com","author":"yanghq","message":"doc: Get available embedding models"},{"hash":"0f9b7638726c749e589c45bf226067794ff56d9f","time":1744110755000,"email":"1040926235@qq.com","author":"yanghq","message":"fix: DocumentMetaDataUpdateRequest add value"},{"hash":"2cfc1a1803dda434de64d085293e79ab8e77c614","time":1743472855000,"email":"1040926235@qq.com","author":"yanghq","message":"fix: dataset retrieve rename tsne_position to tsnePosition fix: Remove redundant code"},{"hash":"43389ab9f042c6d37814028288566ff24976afb8","time":1742810434000,"email":"1040926235@qq.com","author":"yanghq","message":"fix: RetrievalModel weights close #11"},{"hash":"c2095a0375433250cb79ef3397ec5c14e5ba3001","time":1742807144000,"email":"1040926235@qq.com","author":"yanghq","message":"fix: knowledge Metadata"},{"hash":"1febc3e97bc7ae33e5849daddae3b553b9b26cac","time":1742796362000,"email":"1040926235@qq.com","author":"yanghq","message":"doc: Metadata"},{"hash":"eab675fa5615f7cc4053688dbe42b9266653caf7","time":1742433355000,"email":"1040926235@qq.com","author":"yanghq","message":"reformat code"},{"hash":"6cbbf686fa7595403827e007bfd7bca72931597e","time":1742377434000,"email":"1040926235@qq.com","author":"yanghq","message":"doc: update dataset doc"},{"hash":"291e0ed1023db42e1cad6b9f8d8f3aac50b2291b","time":1742291641000,"email":"1040926235@qq.com","author":"yanghq","message":"feat: Provide separate starter"},{"hash":"8b6b79b9f258da4b1a179c67759a1bfe32d0121a","time":1742028327000,"email":"1040926235@qq.com","author":"過世秋風","message":"Update dataset.md"},{"hash":"2cecd5f1aa7c7d3978598cb53ea79fd53a2f62ba","time":1742028115000,"email":"1040926235@qq.com","author":"過世秋風","message":"Update dataset.md"},{"hash":"7fae2ef6a39d15ecf9e7644bbad39459eb2183a8","time":1742027920000,"email":"1040926235@qq.com","author":"過世秋風","message":"Update dataset.md"},{"hash":"1857ab4d422666bb62c3f18a4f6528f61450ff3b","time":1742027604000,"email":"1040926235@qq.com","author":"過世秋風","message":"Update dataset.md"},{"hash":"4d554c14654ee56100e1ef7545acd9f7663b1cf0","time":1741943438000,"email":"1040926235@qq.com","author":"yanghq","message":"doc: dataset (Knowledge)"}]},"filePathRelative":"guide/feature/dataset.md"}');export{o as comp,p as data};
