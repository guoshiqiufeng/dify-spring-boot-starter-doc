import{_ as i,c as o,b as s,d as a,e as t,w as l,a as p,r as c,o as r}from"./app-BhQK0LkI.js";const u={};function d(m,n){const e=c("RouteLink");return r(),o("div",null,[n[9]||(n[9]=s("h1",{id:"configure",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#configure"},[s("span",null,"Configure")])],-1)),n[10]||(n[10]=s("p",null,[s("a",{href:"https://github.com/guoshiqiufeng/dify-spring-boot-starter",target:"_blank",rel:"noopener noreferrer"},"dify-spring-boot-starter"),a(" is very easy to configure. You only need some basic configuration to get started!")],-1)),s("blockquote",null,[s("p",null,[n[1]||(n[1]=a("Make sure you have dify-spring-boot-starter installed. If you haven't, check out the ",-1)),t(e,{to:"/en/guide/install.html"},{default:l(()=>[...n[0]||(n[0]=[a("Install",-1)])]),_:1}),n[2]||(n[2]=a(".",-1))])]),n[11]||(n[11]=p(`<h2 id="spring-boot-auto-configuration" tabindex="-1"><a class="header-anchor" href="#spring-boot-auto-configuration"><span>Spring Boot Auto-Configuration</span></a></h2><p>For Spring Boot projects, the framework automatically configures all necessary components. You only need to provide connection parameters in the configuration file.</p><h3 id="basic-configuration" tabindex="-1"><a class="header-anchor" href="#basic-configuration"><span>Basic Configuration</span></a></h3><div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml"><pre><code class="language-yaml"><span class="line"><span class="token key atrule">dify</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">url</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//192.168.1.10 <span class="token comment"># Dify service address</span></span>
<span class="line">  <span class="token key atrule">server</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">email</span><span class="token punctuation">:</span> admin@admin.com <span class="token comment"># Dify service email (required for Server API)</span></span>
<span class="line">    <span class="token key atrule">password</span><span class="token punctuation">:</span> admin123456 <span class="token comment"># Dify service password (required for Server API)</span></span>
<span class="line">    <span class="token key atrule">password-encryption</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># Password encryption switch, default true</span></span>
<span class="line">                               <span class="token comment"># Enable for Dify 1.11.2+ (or use Base64 cipher)</span></span>
<span class="line">                               <span class="token comment"># Set to false for versions below 1.11.2</span></span>
<span class="line">  <span class="token key atrule">dataset</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">api-key</span><span class="token punctuation">:</span> dataset<span class="token punctuation">-</span>aaabbbcccdddeeefffggghhh <span class="token comment"># Dataset API key (required for Dataset API)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="client-configuration" tabindex="-1"><a class="header-anchor" href="#client-configuration"><span>Client Configuration</span></a></h3><div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml"><pre><code class="language-yaml"><span class="line"><span class="token key atrule">dify</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">client-config</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">skip-null</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># Whether to skip null fields, default true</span></span>
<span class="line">    <span class="token key atrule">logging</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># Whether to print request logs, default true</span></span>
<span class="line">    <span class="token key atrule">connect-timeout</span><span class="token punctuation">:</span> <span class="token number">30</span> <span class="token comment"># Connection timeout in seconds, default 30</span></span>
<span class="line">    <span class="token key atrule">read-timeout</span><span class="token punctuation">:</span> <span class="token number">30</span> <span class="token comment"># Read timeout in seconds, default 30</span></span>
<span class="line">    <span class="token key atrule">write-timeout</span><span class="token punctuation">:</span> <span class="token number">30</span> <span class="token comment"># Write timeout in seconds, default 30</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="performance-optimization-configuration" tabindex="-1"><a class="header-anchor" href="#performance-optimization-configuration"><span>Performance Optimization Configuration</span></a></h3><p>For high-concurrency scenarios and large-scale applications, you can configure the following performance optimization parameters:</p><div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml"><pre><code class="language-yaml"><span class="line"><span class="token key atrule">dify</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">client-config</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token comment"># Basic timeout configuration</span></span>
<span class="line">    <span class="token key atrule">connect-timeout</span><span class="token punctuation">:</span> <span class="token number">30</span></span>
<span class="line">    <span class="token key atrule">read-timeout</span><span class="token punctuation">:</span> <span class="token number">30</span></span>
<span class="line">    <span class="token key atrule">write-timeout</span><span class="token punctuation">:</span> <span class="token number">30</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment"># Connection pool optimization (improve throughput by 20-30%)</span></span>
<span class="line">    <span class="token key atrule">max-idle-connections</span><span class="token punctuation">:</span> <span class="token number">10</span>      <span class="token comment"># Max idle connections, default 5</span></span>
<span class="line">    <span class="token key atrule">keep-alive-seconds</span><span class="token punctuation">:</span> <span class="token number">300</span>       <span class="token comment"># Keep-alive duration (seconds), default 300</span></span>
<span class="line">    <span class="token key atrule">max-requests</span><span class="token punctuation">:</span> <span class="token number">128</span>             <span class="token comment"># Max concurrent requests, default 64</span></span>
<span class="line">    <span class="token key atrule">max-requests-per-host</span><span class="token punctuation">:</span> <span class="token number">10</span>     <span class="token comment"># Max concurrent requests per host, default 5</span></span>
<span class="line">    <span class="token key atrule">call-timeout</span><span class="token punctuation">:</span> <span class="token number">60</span>              <span class="token comment"># Call timeout (seconds), 0 means no limit</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment"># SSE streaming optimization (reduce disconnections by 90%+)</span></span>
<span class="line">    <span class="token key atrule">sse-read-timeout</span><span class="token punctuation">:</span> <span class="token number">0</span>           <span class="token comment"># SSE read timeout (seconds), 0 disables timeout</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment"># Logging optimization (reduce memory usage by 30-50%)</span></span>
<span class="line">    <span class="token key atrule">logging</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></span>
<span class="line">    <span class="token key atrule">logging-mask-enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>    <span class="token comment"># Enable log masking, default true</span></span>
<span class="line">    <span class="token key atrule">log-body-max-bytes</span><span class="token punctuation">:</span> <span class="token number">4096</span>      <span class="token comment"># Max body bytes in logs, default 4096 (4KB)</span></span>
<span class="line">    <span class="token key atrule">log-binary-body</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>        <span class="token comment"># Whether to log binary responses, default false</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Configuration Details</strong>:</p><p><strong>Connection Pool Configuration</strong>:</p><ul><li><code>max-idle-connections</code>: Maximum number of idle connections in the pool, increase for better connection reuse</li><li><code>keep-alive-seconds</code>: Keep-alive duration for idle connections, connections exceeding this time will be closed</li><li><code>max-requests</code>: Global maximum concurrent requests, limits overall concurrency</li><li><code>max-requests-per-host</code>: Maximum concurrent requests per host, prevents overwhelming a single server</li><li><code>call-timeout</code>: Total call timeout (including connect, read, write), 0 means no limit</li></ul><p><strong>SSE Optimization</strong>:</p><ul><li><code>sse-read-timeout</code>: Read timeout for SSE streaming responses (seconds) <ul><li><code>null</code> (default): Use the <code>read-timeout</code> value</li><li><code>0</code>: Completely disable timeout, suitable for long-running streaming conversations</li><li><code>&gt;0</code>: Use the specified timeout in seconds</li></ul></li></ul><p><strong>Logging Optimization</strong>:</p><ul><li><code>logging-mask-enabled</code>: Enable log masking, default true. When enabled, automatically masks sensitive parameters (api_key, token, password, secret, authorization, access_token, refresh_token, etc.)</li><li><code>log-body-max-bytes</code>: Maximum bytes of response body to log, truncated if exceeded. Set to 0 for no limit</li><li><code>log-binary-body</code>: Whether to log binary responses (e.g., images, files). When enabled, logs binary content size and Content-Type. Recommended to set false to save memory</li></ul><p><strong>Recommended Settings</strong>:</p><ul><li><strong>Low concurrency</strong> (&lt; 10 QPS): Use default values</li><li><strong>Medium concurrency</strong> (10-100 QPS):<div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml"><pre><code class="language-yaml"><span class="line"><span class="token key atrule">max-idle-connections</span><span class="token punctuation">:</span> <span class="token number">10</span></span>
<span class="line"><span class="token key atrule">max-requests</span><span class="token punctuation">:</span> <span class="token number">128</span></span>
<span class="line"><span class="token key atrule">max-requests-per-host</span><span class="token punctuation">:</span> <span class="token number">10</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><strong>High concurrency</strong> (&gt; 100 QPS):<div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml"><pre><code class="language-yaml"><span class="line"><span class="token key atrule">max-idle-connections</span><span class="token punctuation">:</span> <span class="token number">20</span></span>
<span class="line"><span class="token key atrule">max-requests</span><span class="token punctuation">:</span> <span class="token number">256</span></span>
<span class="line"><span class="token key atrule">max-requests-per-host</span><span class="token punctuation">:</span> <span class="token number">20</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h3 id="status-monitoring-configuration" tabindex="-1"><a class="header-anchor" href="#status-monitoring-configuration"><span>Status Monitoring Configuration</span></a></h3><div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml"><pre><code class="language-yaml"><span class="line"><span class="token key atrule">dify</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">status</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">health-indicator-enabled</span><span class="token punctuation">:</span> <span class="token boolean important">false</span> <span class="token comment"># Enable health indicator, default false</span></span>
<span class="line">    <span class="token key atrule">health-indicator-init-by-server</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment"># Initialize via Server, default true</span></span>
<span class="line">    <span class="token key atrule">api-key</span><span class="token punctuation">:</span> your<span class="token punctuation">-</span>api<span class="token punctuation">-</span>key <span class="token comment"># Common API key (optional)</span></span>
<span class="line">    <span class="token key atrule">dataset-api-key</span><span class="token punctuation">:</span> dataset<span class="token punctuation">-</span>key <span class="token comment"># Dataset API key (optional)</span></span>
<span class="line">    <span class="token key atrule">chat-api-key</span><span class="token punctuation">:</span> <span class="token comment"># Chat API key list (optional)</span></span>
<span class="line">      <span class="token punctuation">-</span> chat<span class="token punctuation">-</span>key<span class="token punctuation">-</span><span class="token number">1</span></span>
<span class="line">      <span class="token punctuation">-</span> chat<span class="token punctuation">-</span>key<span class="token punctuation">-</span><span class="token number">2</span></span>
<span class="line">    <span class="token key atrule">workflow-api-key</span><span class="token punctuation">:</span> <span class="token comment"># Workflow API key list (optional)</span></span>
<span class="line">      <span class="token punctuation">-</span> workflow<span class="token punctuation">-</span>key<span class="token punctuation">-</span><span class="token number">1</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="complete-configuration-example" tabindex="-1"><a class="header-anchor" href="#complete-configuration-example"><span>Complete Configuration Example</span></a></h3><div class="language-yaml line-numbers-mode" data-highlighter="prismjs" data-ext="yml"><pre><code class="language-yaml"><span class="line"><span class="token key atrule">dify</span><span class="token punctuation">:</span></span>
<span class="line">  <span class="token key atrule">url</span><span class="token punctuation">:</span> http<span class="token punctuation">:</span>//192.168.1.10</span>
<span class="line">  <span class="token key atrule">server</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">email</span><span class="token punctuation">:</span> admin@admin.com</span>
<span class="line">    <span class="token key atrule">password</span><span class="token punctuation">:</span> admin123456</span>
<span class="line">    <span class="token key atrule">password-encryption</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></span>
<span class="line">  <span class="token key atrule">dataset</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">api-key</span><span class="token punctuation">:</span> dataset<span class="token punctuation">-</span>aaabbbcccdddeeefffggghhh</span>
<span class="line">  <span class="token key atrule">client-config</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">skip-null</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></span>
<span class="line">    <span class="token key atrule">logging</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></span>
<span class="line">    <span class="token key atrule">connect-timeout</span><span class="token punctuation">:</span> <span class="token number">30</span></span>
<span class="line">    <span class="token key atrule">read-timeout</span><span class="token punctuation">:</span> <span class="token number">30</span></span>
<span class="line">    <span class="token key atrule">write-timeout</span><span class="token punctuation">:</span> <span class="token number">30</span></span>
<span class="line">  <span class="token key atrule">status</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token key atrule">health-indicator-enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></span>
<span class="line">    <span class="token key atrule">health-indicator-init-by-server</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,22)),s("p",null,[n[4]||(n[4]=a("For detailed configuration parameters, please see ",-1)),t(e,{to:"/en/config/introduction.html"},{default:l(()=>[...n[3]||(n[3]=[a("Configuration Parameters",-1)])]),_:1}),n[5]||(n[5]=a(".",-1))]),n[12]||(n[12]=s("h2",{id:"pure-java-project-configuration",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#pure-java-project-configuration"},[s("span",null,"Pure Java Project Configuration")])],-1)),s("p",null,[n[7]||(n[7]=a("For pure Java projects (without Spring Boot), you need to manually build clients. Please see ",-1)),t(e,{to:"/en/guide/builder.html"},{default:l(()=>[...n[6]||(n[6]=[a("Builder Pattern",-1)])]),_:1}),n[8]||(n[8]=a(" for details.",-1))])])}const g=i(u,[["render",d]]),v=JSON.parse('{"path":"/en/guide/config.html","title":"Configure","lang":"en-US","frontmatter":{"lang":"en-US","title":"Configure","description":"Configure"},"git":{"updatedTime":1770392265000,"contributors":[{"name":"yanghq","username":"yanghq","email":"1040926235@qq.com","commits":8,"url":"https://github.com/yanghq"}],"changelog":[{"hash":"30f277f07a3114dc493104b428aa4aa78e419696","time":1770392265000,"email":"1040926235@qq.com","author":"yanghq","message":"feat(http): enhance HTTP client with connection pooling and advanced logging"},{"hash":"269883ced299799884a1f10d947091afe4a1fad7","time":1770281464000,"email":"1040926235@qq.com","author":"yanghq","message":"feat(perf): add performance optimization configurations and comprehensive test coverage"},{"hash":"aff79c75b05ed3f03eccfc3faaea184377369c0c","time":1768651081000,"email":"1040926235@qq.com","author":"yanghq","message":"test: add comprehensive test coverage for SpringUtil docs: improve documentation clarity and consistency docs: update copyright year to 2024-2026 perf: improve thread safety and fix memory leak refactor: improve exception handling for unknown HTTP errors feat: improve logging perf: optimize HashMap capacity and add lazy initialization chore: optimize project structure and enhance error handling"},{"hash":"96b10ab4fc8a5e0859b506c77b2e6764dadced4d","time":1768203260000,"email":"1040926235@qq.com","author":"yanghq","message":"2.0.0-SNAPSHOT: doc 2.0.0-SNAPSHOT: changelog"},{"hash":"831ea19853fe88a99630712d9b2c74932459b3b3","time":1766983823000,"email":"1040926235@qq.com","author":"yanghq","message":"fix: server login for new password encryption feature"},{"hash":"a3edef7d7b8e7837f4fcb5207573907ab2f01517","time":1742462004000,"email":"1040926235@qq.com","author":"yanghq","message":"feat: Move DifyProperties email\\\\password under DifyProperties server"},{"hash":"6cbbf686fa7595403827e007bfd7bca72931597e","time":1742377434000,"email":"1040926235@qq.com","author":"yanghq","message":"doc: update dataset doc"},{"hash":"9b5fe204d7e3d722968c2210d61725329e71879b","time":1741498622000,"email":"1040926235@qq.com","author":"yanghq","message":"init"}]},"filePathRelative":"en/guide/config.md"}');export{g as comp,v as data};
