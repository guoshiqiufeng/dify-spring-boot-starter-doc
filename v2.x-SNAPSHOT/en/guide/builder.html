<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.26" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme='dark'] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background-color: var(--vp-c-bg);
      }
    </style>
    <script>
      const useChoice = localStorage.getItem('vuepress-color-scheme')
      const systemStatus =
        'matchMedia' in window
          ? window.matchMedia('(prefers-color-scheme: dark)').matches
          : false

      if (useChoice === 'light') {
        document.documentElement.dataset.theme = 'light'
      } else if (useChoice === 'dark' || systemStatus) {
        document.documentElement.dataset.theme = 'dark'
      }
    </script>
    <link rel="icon" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/images/f.ico"><link rel="shortcut icon" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/images/f.ico"><title>Client Builder | dify-spring-boot-starter</title><meta name="description" content="Client Builder">
    <link rel="preload" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/assets/style-B6p7zfc8.css" as="style"><link rel="stylesheet" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/assets/style-B6p7zfc8.css">
    <link rel="modulepreload" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/assets/app-DOYB5FSv.js"><link rel="modulepreload" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/assets/builder.html-CNkMLz2Z.js">
    <link rel="prefetch" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/assets/index.html-CSkZLirb.js" as="script"><link rel="prefetch" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/assets/custom.html-DgTsUz9Z.js" as="script"><link rel="prefetch" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/assets/introduction.html-CrRT586r.js" as="script"><link rel="prefetch" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/assets/index.html-DBJIEPIN.js" as="script"><link rel="prefetch" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/assets/builder.html-BIw8_h9z.js" as="script"><link rel="prefetch" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/assets/config.html-BRlH_Opu.js" as="script"><link rel="prefetch" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/assets/getting-started.html-DhKwToF3.js" as="script"><link rel="prefetch" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/assets/install.html-DX-oLrcJ.js" as="script"><link rel="prefetch" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/assets/introduction.html-CKDLFo7r.js" as="script"><link rel="prefetch" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/assets/logging-security.html-BvVDavrF.js" as="script"><link rel="prefetch" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/assets/status.html-nter3Z_Z.js" as="script"><link rel="prefetch" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/assets/custom.html-BkpTTJ1G.js" as="script"><link rel="prefetch" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/assets/introduction.html-BYUhRqF5.js" as="script"><link rel="prefetch" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/assets/config.html-BUWyYPZk.js" as="script"><link rel="prefetch" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/assets/getting-started.html-BDjVW3Cr.js" as="script"><link rel="prefetch" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/assets/install.html-DD2qSrR0.js" as="script"><link rel="prefetch" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/assets/introduction.html-D8G0sWuK.js" as="script"><link rel="prefetch" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/assets/logging-security.html-ddNVFJF1.js" as="script"><link rel="prefetch" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/assets/status.html-DLO_iWwC.js" as="script"><link rel="prefetch" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/assets/chat.html-BYDANloj.js" as="script"><link rel="prefetch" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/assets/introduction.html-D8mib1ud.js" as="script"><link rel="prefetch" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/assets/chat.html-BYsHt44g.js" as="script"><link rel="prefetch" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/assets/dataset.html-CbsASfyo.js" as="script"><link rel="prefetch" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/assets/server.html-Dzjfx0Tp.js" as="script"><link rel="prefetch" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/assets/workflow.html-DtROx0M2.js" as="script"><link rel="prefetch" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/assets/chat.html-DR4vii5F.js" as="script"><link rel="prefetch" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/assets/introduction.html-DctdJ748.js" as="script"><link rel="prefetch" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/assets/chat.html-B9NYqnvy.js" as="script"><link rel="prefetch" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/assets/dataset.html-DLK2eUL8.js" as="script"><link rel="prefetch" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/assets/server.html-AEh2PGKK.js" as="script"><link rel="prefetch" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/assets/workflow.html-BybPGPUV.js" as="script"><link rel="prefetch" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/assets/404.html-D7-YEqc_.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon" vp-container><!--[--><header class="vp-navbar" vp-navbar><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/en/"><!----><span class="vp-site-name" aria-hidden="true">dify-spring-boot-starter</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Guide"><span class="title">Guide</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Guide"><span class="title">Guide</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown" style="display:none;"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/en/guide/introduction.html" aria-label="Guide"><!--[--><!--[--><!--]--><!--]-->Guide<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/en/guide/getting-started.html" aria-label="Getting-started"><!--[--><!--[--><!--]--><!--]-->Getting-started<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/en/guide/install.html" aria-label="Install"><!--[--><!--[--><!--]--><!--]-->Install<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/en/guide/config.html" aria-label="Configure"><!--[--><!--[--><!--]--><!--]-->Configure<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link route-link-active auto-link" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/en/guide/builder.html" aria-label="Client Builder"><!--[--><!--[--><!--]--><!--]-->Client Builder<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/en/guide/status.html" aria-label="Service Status Monitoring"><!--[--><!--[--><!--]--><!--]-->Service Status Monitoring<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/en/guide/logging-security.html" aria-label="Logging Security"><!--[--><!--[--><!--]--><!--]-->Logging Security<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>Features</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/en/guide/feature/chat.html" aria-label="Chat API"><!--[--><!--[--><!--]--><!--]-->Chat API<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/en/guide/feature/workflow.html" aria-label="Workflow API"><!--[--><!--[--><!--]--><!--]-->Workflow API<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/en/guide/feature/dataset.html" aria-label="Dataset API"><!--[--><!--[--><!--]--><!--]-->Dataset API<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/en/guide/feature/server.html" aria-label="Server API"><!--[--><!--[--><!--]--><!--]-->Server API<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>Event</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/en/guide/event/introduction.html" aria-label="Instructions"><!--[--><!--[--><!--]--><!--]-->Instructions<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/en/guide/event/chat.html" aria-label="Chat event"><!--[--><!--[--><!--]--><!--]-->Chat event<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Config"><span class="title">Config</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Config"><span class="title">Config</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown" style="display:none;"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/en/config/introduction.html" aria-label="Using configurations"><!--[--><!--[--><!--]--><!--]-->Using configurations<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/en/config/custom.html" aria-label="Customized Configuration"><!--[--><!--[--><!--]--><!--]-->Customized Configuration<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="v2.1.1-SNAPSHOT"><span class="title">v2.1.1-SNAPSHOT</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="v2.1.1-SNAPSHOT"><span class="title">v2.1.1-SNAPSHOT</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown" style="display:none;"><!--[--><li class="vp-navbar-dropdown-item"><a class="auto-link external-link" href="https://guoshiqiufeng.github.io/dify-spring-boot-starter/" aria-label="v2.x" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->v2.x<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="auto-link external-link" href="https://guoshiqiufeng.github.io/dify-spring-boot-starter-doc/v1.x/" aria-label="v1.x" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->v1.x<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="auto-link external-link" href="https://guoshiqiufeng.github.io/dify-spring-boot-starter-doc/v0.x/" aria-label="v0.x" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->v0.x<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="auto-link external-link" href="https://github.com/guoshiqiufeng/dify-spring-boot-starter/releases" aria-label="Changelog" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->Changelog<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">Languages</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">Languages</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown" style="display:none;"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/guide/builder.html" aria-label="简体中文"><!--[--><!--[--><!--]--><!--]-->简体中文<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link route-link-active auto-link" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/en/guide/builder.html" aria-label="English"><!--[--><!--[--><!--]--><!--]-->English<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.com/guoshiqiufeng/dify-spring-boot-starter" aria-label="GitHub" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->GitHub<!--[--><!--[--><!--]--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button type="button" class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar" vp-sidebar><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Guide"><span class="title">Guide</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Guide"><span class="title">Guide</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown" style="display:none;"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/en/guide/introduction.html" aria-label="Guide"><!--[--><!--[--><!--]--><!--]-->Guide<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/en/guide/getting-started.html" aria-label="Getting-started"><!--[--><!--[--><!--]--><!--]-->Getting-started<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/en/guide/install.html" aria-label="Install"><!--[--><!--[--><!--]--><!--]-->Install<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/en/guide/config.html" aria-label="Configure"><!--[--><!--[--><!--]--><!--]-->Configure<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link route-link-active auto-link" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/en/guide/builder.html" aria-label="Client Builder"><!--[--><!--[--><!--]--><!--]-->Client Builder<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/en/guide/status.html" aria-label="Service Status Monitoring"><!--[--><!--[--><!--]--><!--]-->Service Status Monitoring<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/en/guide/logging-security.html" aria-label="Logging Security"><!--[--><!--[--><!--]--><!--]-->Logging Security<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>Features</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/en/guide/feature/chat.html" aria-label="Chat API"><!--[--><!--[--><!--]--><!--]-->Chat API<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/en/guide/feature/workflow.html" aria-label="Workflow API"><!--[--><!--[--><!--]--><!--]-->Workflow API<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/en/guide/feature/dataset.html" aria-label="Dataset API"><!--[--><!--[--><!--]--><!--]-->Dataset API<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/en/guide/feature/server.html" aria-label="Server API"><!--[--><!--[--><!--]--><!--]-->Server API<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul><!--]--></li><li class="vp-navbar-dropdown-item"><!--[--><h4 class="vp-navbar-dropdown-subtitle"><span>Event</span></h4><ul class="vp-navbar-dropdown-subitem-wrapper"><!--[--><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/en/guide/event/introduction.html" aria-label="Instructions"><!--[--><!--[--><!--]--><!--]-->Instructions<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-subitem"><a class="route-link auto-link" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/en/guide/event/chat.html" aria-label="Chat event"><!--[--><!--[--><!--]--><!--]-->Chat event<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul><!--]--></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Config"><span class="title">Config</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Config"><span class="title">Config</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown" style="display:none;"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/en/config/introduction.html" aria-label="Using configurations"><!--[--><!--[--><!--]--><!--]-->Using configurations<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/en/config/custom.html" aria-label="Customized Configuration"><!--[--><!--[--><!--]--><!--]-->Customized Configuration<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="v2.1.1-SNAPSHOT"><span class="title">v2.1.1-SNAPSHOT</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="v2.1.1-SNAPSHOT"><span class="title">v2.1.1-SNAPSHOT</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown" style="display:none;"><!--[--><li class="vp-navbar-dropdown-item"><a class="auto-link external-link" href="https://guoshiqiufeng.github.io/dify-spring-boot-starter/" aria-label="v2.x" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->v2.x<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="auto-link external-link" href="https://guoshiqiufeng.github.io/dify-spring-boot-starter-doc/v1.x/" aria-label="v1.x" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->v1.x<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="auto-link external-link" href="https://guoshiqiufeng.github.io/dify-spring-boot-starter-doc/v0.x/" aria-label="v0.x" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->v0.x<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="auto-link external-link" href="https://github.com/guoshiqiufeng/dify-spring-boot-starter/releases" aria-label="Changelog" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->Changelog<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><div class="vp-navbar-dropdown-wrapper"><button class="vp-navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">Languages</span><span class="arrow down"></span></button><button class="vp-navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">Languages</span><span class="right arrow"></span></button><ul class="vp-navbar-dropdown" style="display:none;"><!--[--><li class="vp-navbar-dropdown-item"><a class="route-link auto-link" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/guide/builder.html" aria-label="简体中文"><!--[--><!--[--><!--]--><!--]-->简体中文<!--[--><!--[--><!--]--><!--]--></a></li><li class="vp-navbar-dropdown-item"><a class="route-link route-link-active auto-link" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/en/guide/builder.html" aria-label="English"><!--[--><!--[--><!--]--><!--]-->English<!--[--><!--[--><!--]--><!--]--></a></li><!--]--></ul></div></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.com/guoshiqiufeng/dify-spring-boot-starter" aria-label="GitHub" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->GitHub<!--[--><!--[--><!--]--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading active collapsible">Guide <span class="down arrow"></span></p><ul class="vp-sidebar-children" style=""><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/en/guide/introduction.html" aria-label="Guide"><!--[--><!--[--><!--]--><!--]-->Guide<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/en/guide/getting-started.html" aria-label="Getting-started"><!--[--><!--[--><!--]--><!--]-->Getting-started<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/en/guide/install.html" aria-label="Install"><!--[--><!--[--><!--]--><!--]-->Install<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/en/guide/config.html" aria-label="Configure"><!--[--><!--[--><!--]--><!--]-->Configure<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link route-link-active auto-link vp-sidebar-item active" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/en/guide/builder.html" aria-label="Client Builder"><!--[--><!--[--><!--]--><!--]-->Client Builder<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/en/guide/status.html" aria-label="Service Status Monitoring"><!--[--><!--[--><!--]--><!--]-->Service Status Monitoring<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/en/guide/logging-security.html" aria-label="Logging Security"><!--[--><!--[--><!--]--><!--]-->Logging Security<!--[--><!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading collapsible">Features <span class="right arrow"></span></p><ul class="vp-sidebar-children" style="display:none;"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/en/guide/feature/chat.html" aria-label="Chat API"><!--[--><!--[--><!--]--><!--]-->Chat API<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/en/guide/feature/workflow.html" aria-label="Workflow API"><!--[--><!--[--><!--]--><!--]-->Workflow API<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/en/guide/feature/dataset.html" aria-label="Dataset API"><!--[--><!--[--><!--]--><!--]-->Dataset API<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/en/guide/feature/server.html" aria-label="Server API"><!--[--><!--[--><!--]--><!--]-->Server API<!--[--><!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading collapsible">Event <span class="right arrow"></span></p><ul class="vp-sidebar-children" style="display:none;"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/en/guide/event/introduction.html" aria-label="Instructions"><!--[--><!--[--><!--]--><!--]-->Instructions<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/en/guide/event/chat.html" aria-label="Chat event"><!--[--><!--[--><!--]--><!--]-->Chat event<!--[--><!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div vp-content><!--[--><!--]--><div id="content"><h1 id="client-builder" tabindex="-1"><a class="header-anchor" href="#client-builder"><span>Client Builder</span></a></h1><p>The Dify Java client library uses the builder pattern to make it easy to create and configure the various clients needed to interact with the Dify API. If you are using a non-SpringBoot project or don&#39;t want to use the default constructor instance, you can use the methods below for custom construction.</p><h2 id="pure-java-projects" tabindex="-1"><a class="header-anchor" href="#pure-java-projects"><span>Pure Java Projects</span></a></h2><p>For non-Spring Boot projects, you can use the <code>dify-java-starter</code> module:</p><h3 id="add-dependency" tabindex="-1"><a class="header-anchor" href="#add-dependency"><span>Add Dependency</span></a></h3><div class="language-xml" data-highlighter="prismjs" data-ext="xml"><pre><code class="language-xml"><span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>io.github.guoshiqiufeng.dify<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>dify-java-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.1.1-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre></div><h3 id="usage-example" tabindex="-1"><a class="header-anchor" href="#usage-example"><span>Usage Example</span></a></h3><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token comment">// Create Dify client</span></span>
<span class="line"><span class="token class-name">DifyClient</span> difyClient <span class="token operator">=</span> <span class="token class-name">DifyClient</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">baseUrl</span><span class="token punctuation">(</span><span class="token string">&quot;https://your-dify-api.example.com&quot;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Get various service clients</span></span>
<span class="line"><span class="token class-name">DifyChat</span> chat <span class="token operator">=</span> difyClient<span class="token punctuation">.</span><span class="token function">getChat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token class-name">DifyDataset</span> dataset <span class="token operator">=</span> difyClient<span class="token punctuation">.</span><span class="token function">getDataset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token class-name">DifyWorkflow</span> workflow <span class="token operator">=</span> difyClient<span class="token punctuation">.</span><span class="token function">getWorkflow</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token class-name">DifyServer</span> server <span class="token operator">=</span> difyClient<span class="token punctuation">.</span><span class="token function">getServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="overview" tabindex="-1"><a class="header-anchor" href="#overview"><span>Overview</span></a></h2><p>The Dify client library includes several builders for different API endpoints:</p><ul><li><code>DifyChatBuilder</code> - For chat-related operations</li><li><code>DifyDatasetBuilder</code> - For dataset operations</li><li><code>DifyWorkflowBuilder</code> - For workflow operations</li><li><code>DifyServerBuilder</code> - For server administration operations</li></ul><p>All builders extend the <code>BaseDifyBuilder</code> abstract class, which provides common configuration methods and ensures consistent behavior across all client types.</p><h3 id="builder-architecture" tabindex="-1"><a class="header-anchor" href="#builder-architecture"><span>Builder Architecture</span></a></h3><p>The builder pattern implementation follows these principles:</p><ol><li><strong>Two-Step Creation</strong>: Builders first create a low-level Client (e.g., <code>DifyChatClient</code>), then wrap it in a high-level service interface (e.g., <code>DifyChat</code>)</li><li><strong>Framework Agnostic</strong>: The <code>dify-support-impl</code> module provides framework-independent implementations that work with any HTTP client factory</li><li><strong>Fluent API</strong>: All configuration methods return the builder instance for method chaining</li><li><strong>Validation</strong>: The <code>build()</code> method validates required parameters and throws <code>IllegalStateException</code> if <code>httpClientFactory</code> is not set</li><li><strong>Default Values</strong>: Common properties like <code>baseUrl</code> and <code>clientConfig</code> have sensible defaults</li></ol><h2 id="spring-boot-projects" tabindex="-1"><a class="header-anchor" href="#spring-boot-projects"><span>Spring Boot Projects</span></a></h2><p>In Spring Boot projects, it&#39;s recommended to use auto-configuration. Simply add the appropriate starter dependency and configure <code>application.yml</code>.</p><p>See <a class="route-link" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/en/guide/getting-started.html">Getting Started</a> and <a class="route-link" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/en/guide/config.html">Configuration</a> for details.</p><h2 id="using-the-builders" tabindex="-1"><a class="header-anchor" href="#using-the-builders"><span>Using the Builders</span></a></h2><h3 id="basic-usage" tabindex="-1"><a class="header-anchor" href="#basic-usage"><span>Basic Usage</span></a></h3><p>The builder pattern in Dify Java SDK uses a two-step creation process:</p><ol><li><strong>Build a Client</strong> (e.g., <code>DifyChatClient</code>, <code>DifyServerClient</code>) using the builder&#39;s <code>build()</code> method</li><li><strong>Create a Service Interface</strong> (e.g., <code>DifyChat</code>, <code>DifyServer</code>) from the Client using the builder&#39;s <code>create()</code> method</li></ol><p>This separation allows for flexible configuration of the underlying HTTP client while providing a clean service interface for API operations.</p><h3 id="choosing-http-client-factory" tabindex="-1"><a class="header-anchor" href="#choosing-http-client-factory"><span>Choosing HTTP Client Factory</span></a></h3><p>Choose the appropriate HTTP client factory based on your project environment:</p><ul><li><strong>Pure Java Projects</strong>: Use <code>JavaHttpClientFactory</code> (based on OkHttp)</li><li><strong>Spring Projects</strong>: Use <code>SpringHttpClientFactory</code> (based on Spring WebClient/RestClient)</li><li><strong>Spring Boot Projects</strong>: Recommended to use auto-configuration, no manual building required</li></ul><h4 id="pure-java-project-example" tabindex="-1"><a class="header-anchor" href="#pure-java-project-example"><span>Pure Java Project Example</span></a></h4><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>github<span class="token punctuation">.</span>guoshiqiufeng<span class="token punctuation">.</span>dify<span class="token punctuation">.</span>client<span class="token punctuation">.</span>integration<span class="token punctuation">.</span>okhttp<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">JavaHttpClientFactory</span></span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>github<span class="token punctuation">.</span>guoshiqiufeng<span class="token punctuation">.</span>dify<span class="token punctuation">.</span>client<span class="token punctuation">.</span>codec<span class="token punctuation">.</span>jackson<span class="token punctuation">.</span></span><span class="token class-name">JacksonJsonMapper</span></span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 1. Create HTTP client factory (OkHttp)</span></span>
<span class="line"><span class="token class-name">JavaHttpClientFactory</span> httpClientFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JavaHttpClientFactory</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">JacksonJsonMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 2. Create DifyChatClient</span></span>
<span class="line"><span class="token class-name">DifyChatClient</span> difyChatClient <span class="token operator">=</span> <span class="token class-name">DifyChatBuilder</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">baseUrl</span><span class="token punctuation">(</span><span class="token string">&quot;https://your-dify-api.example.com&quot;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">httpClientFactory</span><span class="token punctuation">(</span>httpClientFactory<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 3. Create DifyChat</span></span>
<span class="line"><span class="token class-name">DifyChat</span> difyChat <span class="token operator">=</span> <span class="token class-name">DifyChatBuilder</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>difyChatClient<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="spring-project-example" tabindex="-1"><a class="header-anchor" href="#spring-project-example"><span>Spring Project Example</span></a></h4><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>github<span class="token punctuation">.</span>guoshiqiufeng<span class="token punctuation">.</span>dify<span class="token punctuation">.</span>client<span class="token punctuation">.</span>integration<span class="token punctuation">.</span>spring<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">SpringHttpClientFactory</span></span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>github<span class="token punctuation">.</span>guoshiqiufeng<span class="token punctuation">.</span>dify<span class="token punctuation">.</span>client<span class="token punctuation">.</span>codec<span class="token punctuation">.</span>jackson<span class="token punctuation">.</span></span><span class="token class-name">JacksonJsonMapper</span></span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>reactive<span class="token punctuation">.</span>function<span class="token punctuation">.</span>client<span class="token punctuation">.</span></span><span class="token class-name">WebClient</span></span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>client<span class="token punctuation">.</span></span><span class="token class-name">RestClient</span></span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 1. Create HTTP client factory (Spring)</span></span>
<span class="line"><span class="token class-name">SpringHttpClientFactory</span> httpClientFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SpringHttpClientFactory</span><span class="token punctuation">(</span></span>
<span class="line">    <span class="token class-name">WebClient</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token class-name">RestClient</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token comment">// Spring 6.1+ / Spring Boot 3.2+</span></span>
<span class="line">    <span class="token keyword">new</span> <span class="token class-name">JacksonJsonMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 2. Create DifyChatClient</span></span>
<span class="line"><span class="token class-name">DifyChatClient</span> difyChatClient <span class="token operator">=</span> <span class="token class-name">DifyChatBuilder</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">baseUrl</span><span class="token punctuation">(</span><span class="token string">&quot;https://your-dify-api.example.com&quot;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">httpClientFactory</span><span class="token punctuation">(</span>httpClientFactory<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 3. Create DifyChat</span></span>
<span class="line"><span class="token class-name">DifyChat</span> difyChat <span class="token operator">=</span> <span class="token class-name">DifyChatBuilder</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>difyChatClient<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Note</strong>: In Spring Boot 2.x or Spring 5.x environments, RestClient is not available, pass <code>null</code>:</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token class-name">SpringHttpClientFactory</span> httpClientFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SpringHttpClientFactory</span><span class="token punctuation">(</span></span>
<span class="line">    <span class="token class-name">WebClient</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token keyword">null</span><span class="token punctuation">,</span>  <span class="token comment">// Spring Boot 2.x doesn&#39;t have RestClient</span></span>
<span class="line">    <span class="token keyword">new</span> <span class="token class-name">JacksonJsonMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="creating-a-dataset-client" tabindex="-1"><a class="header-anchor" href="#creating-a-dataset-client"><span>Creating a Dataset Client</span></a></h4><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token comment">// Use JavaHttpClientFactory (Pure Java projects)</span></span>
<span class="line"><span class="token class-name">JavaHttpClientFactory</span> httpClientFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JavaHttpClientFactory</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">JacksonJsonMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Or use SpringHttpClientFactory (Spring projects)</span></span>
<span class="line"><span class="token comment">// SpringHttpClientFactory httpClientFactory = new SpringHttpClientFactory(</span></span>
<span class="line"><span class="token comment">//     WebClient.builder(), RestClient.builder(), new JacksonJsonMapper()</span></span>
<span class="line"><span class="token comment">// );</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Create DifyDatasetClient (with API Key)</span></span>
<span class="line"><span class="token class-name">DifyDatasetClient</span> difyDatasetClient <span class="token operator">=</span> <span class="token class-name">DifyDatasetBuilder</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">baseUrl</span><span class="token punctuation">(</span><span class="token string">&quot;https://your-dify-api.example.com&quot;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">httpClientFactory</span><span class="token punctuation">(</span>httpClientFactory<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">apiKey</span><span class="token punctuation">(</span><span class="token string">&quot;dataset-aaabbbcccdddeeefffggghhh&quot;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Create DifyDataset</span></span>
<span class="line"><span class="token class-name">DifyDataset</span> difyDataset <span class="token operator">=</span> <span class="token class-name">DifyDatasetBuilder</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>difyDatasetClient<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="creating-a-server-client" tabindex="-1"><a class="header-anchor" href="#creating-a-server-client"><span>Creating a Server Client</span></a></h4><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token comment">// Use JavaHttpClientFactory (Pure Java projects)</span></span>
<span class="line"><span class="token class-name">JavaHttpClientFactory</span> httpClientFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JavaHttpClientFactory</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">JacksonJsonMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Or use SpringHttpClientFactory (Spring projects)</span></span>
<span class="line"><span class="token comment">// SpringHttpClientFactory httpClientFactory = new SpringHttpClientFactory(</span></span>
<span class="line"><span class="token comment">//     WebClient.builder(), RestClient.builder(), new JacksonJsonMapper()</span></span>
<span class="line"><span class="token comment">// );</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Create DifyServerClient (with server authentication)</span></span>
<span class="line"><span class="token class-name">DifyServerClient</span> difyServerClient <span class="token operator">=</span> <span class="token class-name">DifyServerBuilder</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">baseUrl</span><span class="token punctuation">(</span><span class="token string">&quot;http://192.168.1.150&quot;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">httpClientFactory</span><span class="token punctuation">(</span>httpClientFactory<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">serverProperties</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">DifyProperties<span class="token punctuation">.</span>Server</span><span class="token punctuation">(</span><span class="token string">&quot;admin@example.com&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;password&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Create DifyServer</span></span>
<span class="line"><span class="token class-name">DifyServer</span> difyServer <span class="token operator">=</span> <span class="token class-name">DifyServerBuilder</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>difyServerClient<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Use the service</span></span>
<span class="line"><span class="token class-name">AppsResponseResult</span> apps <span class="token operator">=</span> difyServer<span class="token punctuation">.</span><span class="token function">apps</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">AppsRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="creating-a-workflow-client" tabindex="-1"><a class="header-anchor" href="#creating-a-workflow-client"><span>Creating a Workflow Client</span></a></h4><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token comment">// Use JavaHttpClientFactory (Pure Java projects)</span></span>
<span class="line"><span class="token class-name">JavaHttpClientFactory</span> httpClientFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JavaHttpClientFactory</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">JacksonJsonMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Or use SpringHttpClientFactory (Spring projects)</span></span>
<span class="line"><span class="token comment">// SpringHttpClientFactory httpClientFactory = new SpringHttpClientFactory(</span></span>
<span class="line"><span class="token comment">//     WebClient.builder(), RestClient.builder(), new JacksonJsonMapper()</span></span>
<span class="line"><span class="token comment">// );</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Create DifyWorkflowClient</span></span>
<span class="line"><span class="token class-name">DifyWorkflowClient</span> difyWorkflowClient <span class="token operator">=</span> <span class="token class-name">DifyWorkflowBuilder</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">baseUrl</span><span class="token punctuation">(</span><span class="token string">&quot;https://your-dify-api.example.com&quot;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">httpClientFactory</span><span class="token punctuation">(</span>httpClientFactory<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Create DifyWorkflow</span></span>
<span class="line"><span class="token class-name">DifyWorkflow</span> difyWorkflow <span class="token operator">=</span> <span class="token class-name">DifyWorkflowBuilder</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>difyWorkflowClient<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="common-configuration-options" tabindex="-1"><a class="header-anchor" href="#common-configuration-options"><span>Common Configuration Options</span></a></h2><p>All builders extend <code>BaseDifyBuilder</code> and support these common configuration options:</p><ul><li><code>baseUrl(String)</code> - Set the base URL for the Dify API (defaults to <code>https://api.dify.ai/v1</code> if not specified)</li><li><code>httpClientFactory(HttpClientFactory)</code> - Set the HTTP client factory (<strong>required</strong>, throws <code>IllegalStateException</code> if not set)</li><li><code>clientConfig(DifyProperties.ClientConfig)</code> - Configure client behavior like timeout, retry policy, logging, etc. (defaults to a new instance if not specified)</li></ul><h3 id="dataset-specific-configuration" tabindex="-1"><a class="header-anchor" href="#dataset-specific-configuration"><span>Dataset-Specific Configuration</span></a></h3><ul><li><code>apiKey(String)</code> - Set the dataset API Key (automatically adds <code>Authorization: Bearer &lt;apiKey&gt;</code> header to all requests)</li></ul><h3 id="server-specific-configuration" tabindex="-1"><a class="header-anchor" href="#server-specific-configuration"><span>Server-Specific Configuration</span></a></h3><ul><li><code>serverProperties(DifyProperties.Server)</code> - Set server authentication information (email and password) for login</li><li><code>serverToken(BaseDifyServerToken)</code> - Set a custom token manager (defaults to <code>DifyServerTokenDefault</code> if not specified)</li></ul><h2 id="advanced-usage" tabindex="-1"><a class="header-anchor" href="#advanced-usage"><span>Advanced Usage</span></a></h2><h3 id="customizing-http-clients" tabindex="-1"><a class="header-anchor" href="#customizing-http-clients"><span>Customizing HTTP Clients</span></a></h3><p>You can customize HTTP client behavior through <code>HttpClientFactory</code>:</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token comment">// Create HTTP client factory with custom headers</span></span>
<span class="line"><span class="token class-name">JavaHttpClientFactory</span> httpClientFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JavaHttpClientFactory</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">JacksonJsonMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">defaultHeader</span><span class="token punctuation">(</span><span class="token string">&quot;Custom-Header&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Value&quot;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">defaultHeader</span><span class="token punctuation">(</span><span class="token string">&quot;Another-Header&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;AnotherValue&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token class-name">DifyChatClient</span> difyChatClient <span class="token operator">=</span> <span class="token class-name">DifyChatBuilder</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">baseUrl</span><span class="token punctuation">(</span><span class="token string">&quot;https://your-dify-api.example.com&quot;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">httpClientFactory</span><span class="token punctuation">(</span>httpClientFactory<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="adding-interceptors" tabindex="-1"><a class="header-anchor" href="#adding-interceptors"><span>Adding Interceptors</span></a></h3><p>You can add interceptors to the HTTP client (requires OkHttp Interceptor):</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">okhttp3<span class="token punctuation">.</span></span><span class="token class-name">Interceptor</span></span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">okhttp3<span class="token punctuation">.</span></span><span class="token class-name">Response</span></span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Create custom interceptor</span></span>
<span class="line"><span class="token class-name">Interceptor</span> loggingInterceptor <span class="token operator">=</span> chain <span class="token operator">-&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Request: &quot;</span> <span class="token operator">+</span> chain<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">url</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token class-name">Response</span> response <span class="token operator">=</span> chain<span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span>chain<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Response: &quot;</span> <span class="token operator">+</span> response<span class="token punctuation">.</span><span class="token function">code</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">return</span> response<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Add interceptor to factory</span></span>
<span class="line"><span class="token class-name">JavaHttpClientFactory</span> httpClientFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JavaHttpClientFactory</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">JacksonJsonMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">interceptor</span><span class="token punctuation">(</span>loggingInterceptor<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token class-name">DifyChatClient</span> difyChatClient <span class="token operator">=</span> <span class="token class-name">DifyChatBuilder</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">baseUrl</span><span class="token punctuation">(</span><span class="token string">&quot;https://your-dify-api.example.com&quot;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">httpClientFactory</span><span class="token punctuation">(</span>httpClientFactory<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="setting-client-configuration" tabindex="-1"><a class="header-anchor" href="#setting-client-configuration"><span>Setting Client Configuration</span></a></h3><p>You can configure how the client behaves:</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token comment">// Configure client behavior</span></span>
<span class="line"><span class="token class-name">DifyProperties<span class="token punctuation">.</span>ClientConfig</span> clientConfig <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DifyProperties<span class="token punctuation">.</span>ClientConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">clientConfig<span class="token punctuation">.</span><span class="token function">setSkipNull</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Don&#39;t skip null fields</span></span>
<span class="line">clientConfig<span class="token punctuation">.</span><span class="token function">setLogging</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// Enable logging</span></span>
<span class="line"></span>
<span class="line"><span class="token class-name">JavaHttpClientFactory</span> httpClientFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JavaHttpClientFactory</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">JacksonJsonMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token class-name">DifyWorkflowClient</span> difyWorkflowClient <span class="token operator">=</span> <span class="token class-name">DifyWorkflowBuilder</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">baseUrl</span><span class="token punctuation">(</span><span class="token string">&quot;https://your-dify-api.example.com&quot;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">httpClientFactory</span><span class="token punctuation">(</span>httpClientFactory<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">clientConfig</span><span class="token punctuation">(</span>clientConfig<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token class-name">DifyWorkflow</span> difyWorkflow <span class="token operator">=</span> <span class="token class-name">DifyWorkflowBuilder</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>difyWorkflowClient<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="using-gson-instead-of-jackson" tabindex="-1"><a class="header-anchor" href="#using-gson-instead-of-jackson"><span>Using Gson Instead of Jackson</span></a></h3><p>You can use Gson as the JSON serialization library:</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>github<span class="token punctuation">.</span>guoshiqiufeng<span class="token punctuation">.</span>dify<span class="token punctuation">.</span>client<span class="token punctuation">.</span>codec<span class="token punctuation">.</span>gson<span class="token punctuation">.</span></span><span class="token class-name">GsonJsonMapper</span></span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// Use Gson</span></span>
<span class="line"><span class="token class-name">JavaHttpClientFactory</span> httpClientFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JavaHttpClientFactory</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">GsonJsonMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token class-name">DifyChatClient</span> difyChatClient <span class="token operator">=</span> <span class="token class-name">DifyChatBuilder</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">baseUrl</span><span class="token punctuation">(</span><span class="token string">&quot;https://your-dify-api.example.com&quot;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">httpClientFactory</span><span class="token punctuation">(</span>httpClientFactory<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="example-complete-configuration" tabindex="-1"><a class="header-anchor" href="#example-complete-configuration"><span>Example: Complete Configuration</span></a></h2><p>Here&#39;s an example with full configuration:</p><div class="language-java line-numbers-mode" data-highlighter="prismjs" data-ext="java"><pre><code class="language-java"><span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>github<span class="token punctuation">.</span>guoshiqiufeng<span class="token punctuation">.</span>dify<span class="token punctuation">.</span>client<span class="token punctuation">.</span>integration<span class="token punctuation">.</span>okhttp<span class="token punctuation">.</span>http<span class="token punctuation">.</span></span><span class="token class-name">JavaHttpClientFactory</span></span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>github<span class="token punctuation">.</span>guoshiqiufeng<span class="token punctuation">.</span>dify<span class="token punctuation">.</span>client<span class="token punctuation">.</span>codec<span class="token punctuation">.</span>jackson<span class="token punctuation">.</span></span><span class="token class-name">JacksonJsonMapper</span></span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">io<span class="token punctuation">.</span>github<span class="token punctuation">.</span>guoshiqiufeng<span class="token punctuation">.</span>dify<span class="token punctuation">.</span>core<span class="token punctuation">.</span>config<span class="token punctuation">.</span></span><span class="token class-name">DifyProperties</span></span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">import</span> <span class="token import"><span class="token namespace">okhttp3<span class="token punctuation">.</span></span><span class="token class-name">Interceptor</span></span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 1. Create custom interceptor</span></span>
<span class="line"><span class="token class-name">Interceptor</span> loggingInterceptor <span class="token operator">=</span> chain <span class="token operator">-&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Request: &quot;</span> <span class="token operator">+</span> chain<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">url</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">return</span> chain<span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span>chain<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 2. Create and configure HTTP client factory</span></span>
<span class="line"><span class="token class-name">JavaHttpClientFactory</span> httpClientFactory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JavaHttpClientFactory</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">JacksonJsonMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">defaultHeader</span><span class="token punctuation">(</span><span class="token string">&quot;X-Custom-Header&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;CustomValue&quot;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">interceptor</span><span class="token punctuation">(</span>loggingInterceptor<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 3. Configure client behavior</span></span>
<span class="line"><span class="token class-name">DifyProperties<span class="token punctuation">.</span>ClientConfig</span> clientConfig <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DifyProperties<span class="token punctuation">.</span>ClientConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">clientConfig<span class="token punctuation">.</span><span class="token function">setSkipNull</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">clientConfig<span class="token punctuation">.</span><span class="token function">setLogging</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 4. Create Server client</span></span>
<span class="line"><span class="token class-name">DifyServerClient</span> difyServerClient <span class="token operator">=</span> <span class="token class-name">DifyServerBuilder</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">baseUrl</span><span class="token punctuation">(</span><span class="token string">&quot;http://192.168.1.150&quot;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">httpClientFactory</span><span class="token punctuation">(</span>httpClientFactory<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">clientConfig</span><span class="token punctuation">(</span>clientConfig<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">serverProperties</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">DifyProperties<span class="token punctuation">.</span>Server</span><span class="token punctuation">(</span><span class="token string">&quot;admin@example.com&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;password&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 5. Create DifyServer service</span></span>
<span class="line"><span class="token class-name">DifyServer</span> difyServer <span class="token operator">=</span> <span class="token class-name">DifyServerBuilder</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>difyServerClient<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// 6. Use the service</span></span>
<span class="line"><span class="token class-name">AppsResponseResult</span> apps <span class="token operator">=</span> difyServer<span class="token punctuation">.</span><span class="token function">apps</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">AppsRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="dependencies" tabindex="-1"><a class="header-anchor" href="#dependencies"><span>Dependencies</span></a></h2><p>To use the builders, you need to add the following dependencies:</p><h3 id="pure-java-projects-1" tabindex="-1"><a class="header-anchor" href="#pure-java-projects-1"><span>Pure Java Projects</span></a></h3><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml"><pre><code class="language-xml"><span class="line"><span class="token comment">&lt;!-- Core support --&gt;</span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>io.github.guoshiqiufeng.dify<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>dify-support-impl<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${dify.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line"><span class="token comment">&lt;!-- HTTP client integration (OkHttp) --&gt;</span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>io.github.guoshiqiufeng.dify<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>dify-client-integration-okhttp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${dify.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line"><span class="token comment">&lt;!-- JSON codec (choose one) --&gt;</span></span>
<span class="line"><span class="token comment">&lt;!-- Jackson --&gt;</span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>io.github.guoshiqiufeng.dify<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>dify-client-codec-jackson<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${dify.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line"><span class="token comment">&lt;!-- Or Gson --&gt;</span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>io.github.guoshiqiufeng.dify<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>dify-client-codec-gson<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${dify.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="spring-projects" tabindex="-1"><a class="header-anchor" href="#spring-projects"><span>Spring Projects</span></a></h3><div class="language-xml line-numbers-mode" data-highlighter="prismjs" data-ext="xml"><pre><code class="language-xml"><span class="line"><span class="token comment">&lt;!-- Core support --&gt;</span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>io.github.guoshiqiufeng.dify<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>dify-support-impl<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${dify.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line"><span class="token comment">&lt;!-- HTTP client integration (Spring) --&gt;</span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>io.github.guoshiqiufeng.dify<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>dify-client-integration-spring<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${dify.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line"><span class="token comment">&lt;!-- JSON codec (choose one) --&gt;</span></span>
<span class="line"><span class="token comment">&lt;!-- Jackson --&gt;</span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>io.github.guoshiqiufeng.dify<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>dify-client-codec-jackson<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${dify.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span>
<span class="line"><span class="token comment">&lt;!-- Or Gson --&gt;</span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>io.github.guoshiqiufeng.dify<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>dify-client-codec-gson<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span></span>
<span class="line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>${dify.version}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="implementation-features" tabindex="-1"><a class="header-anchor" href="#implementation-features"><span>Implementation Features</span></a></h2><p>The <code>dify-support-impl</code> module provides comprehensive implementations with the following features:</p><h3 id="error-handling" tabindex="-1"><a class="header-anchor" href="#error-handling"><span>Error Handling</span></a></h3><p>All client implementations include a custom <code>DifyResponseErrorHandler</code> that provides:</p><ul><li><strong>HTTP 401 Unauthorized</strong>: Throws <code>DifyException</code> with &quot;Unauthorized&quot; message</li><li><strong>HTTP 404 Not Found</strong>: Throws <code>DifyException</code> with &quot;Not Found&quot; message</li><li><strong>Other Errors</strong>: Extracts error details from response body and throws <code>DifyException</code> with status code and message</li></ul><h3 id="streaming-support" tabindex="-1"><a class="header-anchor" href="#streaming-support"><span>Streaming Support</span></a></h3><p>The implementation includes specialized DTOs with custom deserializers for streaming responses:</p><ul><li><strong>Chat Streaming</strong>: <code>ChatMessageSendCompletionResponseDto</code> with <code>ChatMessageSendCompletionResponseDeserializer</code></li><li><strong>Workflow Streaming</strong>: <code>WorkflowRunStreamResponseDto</code> with <code>WorkflowRunStreamResponseDeserializer</code></li><li><strong>Dataset Operations</strong>: <code>SegmentDataResponseDto</code> with <code>SegmentDataResponseDeserializer</code></li></ul><p>These deserializers handle Server-Sent Events (SSE) format and parse streaming data correctly.</p><h3 id="file-upload-support" tabindex="-1"><a class="header-anchor" href="#file-upload-support"><span>File Upload Support</span></a></h3><p>The <code>MultipartBodyUtil</code> utility class provides:</p><ul><li>Multipart form data handling for file uploads</li><li>Support for <code>DifyFile</code> objects with automatic content type detection</li><li>Proper boundary and content disposition headers</li></ul><h3 id="authentication" tabindex="-1"><a class="header-anchor" href="#authentication"><span>Authentication</span></a></h3><p>Multiple authentication methods are supported:</p><ul><li><strong>API Key Authentication</strong>: Automatic <code>Authorization: Bearer &lt;apiKey&gt;</code> header injection (Dataset operations)</li><li><strong>Token-Based Authentication</strong>: Cookie-based authentication with refresh token support (Server operations)</li><li><strong>Custom Token Managers</strong>: Implement <code>BaseDifyServerToken</code> for custom token management strategies</li></ul><h3 id="retry-mechanisms" tabindex="-1"><a class="header-anchor" href="#retry-mechanisms"><span>Retry Mechanisms</span></a></h3><p>Server operations include built-in retry logic:</p><ul><li>Automatic token refresh on authentication failures</li><li>Configurable retry attempts for transient errors</li><li>Exponential backoff support through client configuration</li></ul><h2 id="notes" tabindex="-1"><a class="header-anchor" href="#notes"><span>Notes</span></a></h2><ul><li><strong>HttpClientFactory is required</strong>: All builders require <code>httpClientFactory</code> to be set before calling <code>build()</code>. If not set, an <code>IllegalStateException</code> will be thrown with the message &quot;HttpClientFactory must be set before building the client&quot;</li><li><strong>Two-step creation process</strong>: <ol><li>First, use the builder to create a Client (e.g., <code>DifyChatClient</code>) by calling <code>builder().build()</code></li><li>Then, create the service interface (e.g., <code>DifyChat</code>) by calling <code>create(client)</code></li></ol></li><li><strong>Choose the appropriate HTTP client factory</strong>: <ul><li>Pure Java projects: Use <code>JavaHttpClientFactory</code> from <code>dify-client-integration-okhttp</code> (based on OkHttp)</li><li>Spring projects: Use <code>SpringHttpClientFactory</code> from <code>dify-client-integration-spring</code> (based on Spring WebClient/RestClient)</li><li>Spring Boot projects: Recommended to use auto-configuration instead of manual building</li></ul></li><li><strong>JSON codec</strong>: Supports both Jackson and Gson JSON libraries. Choose according to your project needs: <ul><li>Jackson: Use <code>JacksonJsonMapper</code> from <code>dify-client-codec-jackson</code></li><li>Gson: Use <code>GsonJsonMapper</code> from <code>dify-client-codec-gson</code></li></ul></li><li><strong>Spring version compatibility</strong>: <ul><li>Spring Boot 3.2+ / Spring 6.1+: Supports both WebClient and RestClient</li><li>Spring Boot 2.x / Spring 5.x: Only supports WebClient, pass <code>null</code> for RestClient parameter</li></ul></li><li><strong>Default values</strong>: <ul><li><code>baseUrl</code>: Defaults to <code>BaseDifyClient.DEFAULT_BASE_URL</code> if not specified</li><li><code>clientConfig</code>: Defaults to a new <code>DifyProperties.ClientConfig()</code> instance if not specified</li><li><code>serverToken</code>: Defaults to <code>DifyServerTokenDefault</code> for server clients if not specified</li></ul></li><li><strong>Module location</strong>: The builder implementations are located in the <code>dify-support-impl</code> module under the package <code>io.github.guoshiqiufeng.dify.support.impl.builder</code></li></ul></div><!--[--><!--]--></div><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="auto-link external-link label" href="https://github.com/guoshiqiufeng/dify-spring-boot-starter/edit/main/en/guide/builder.md" aria-label="Edit this page on GitHub" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><svg class="edit-icon" viewbox="0 0 1024 1024"><g fill="currentColor"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></g></svg><!--]--><!--]-->Edit this page on GitHub<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">Last Updated: </span><time class="meta-item-info" datetime="2026-01-16T09:34:55.000Z" data-allow-mismatch>1/16/26, 9:34 AM</time></div><!----></div></footer><nav class="vp-page-nav" aria-label="page navigation"><a class="route-link auto-link prev" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/en/guide/config.html" aria-label="Configure"><!--[--><div class="hint"><span class="arrow left"></span> Prev</div><div class="link"><span class="external-link">Configure</span></div><!--]--></a><a class="route-link auto-link next" href="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/en/guide/status.html" aria-label="Service Status Monitoring"><!--[--><div class="hint">Next <span class="arrow right"></span></div><div class="link"><span class="external-link">Service Status Monitoring</span></div><!--]--></a></nav><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/dify-spring-boot-starter-doc/v2.x-SNAPSHOT/assets/app-DOYB5FSv.js" defer></script>
  </body>
</html>
